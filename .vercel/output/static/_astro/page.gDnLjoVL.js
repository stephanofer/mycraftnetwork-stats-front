(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5257edb1-1901-4663-afe4-eb36e048c314",e._sentryDebugIdIdentifier="sentry-dbid-5257edb1-1901-4663-afe4-eb36e048c314")}catch{}})();const F=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,It="9.15.0",G=globalThis;function Dt(){return zr(G),G}function zr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||It,t[It]=t[It]||{}}function jr(e,t,n=G){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[It]=r[It]||{};return s[e]||(s[e]=t())}const Ua=Object.prototype.toString;function pi(e){switch(Ua.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Je(e,Error)}}function dn(e,t){return Ua.call(e)===`[object ${t}]`}function Ha(e){return dn(e,"ErrorEvent")}function Ji(e){return dn(e,"DOMError")}function El(e){return dn(e,"DOMException")}function Xe(e){return dn(e,"String")}function hi(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function mi(e){return e===null||hi(e)||typeof e!="object"&&typeof e!="function"}function kn(e){return dn(e,"Object")}function qr(e){return typeof Event<"u"&&Je(e,Event)}function vl(e){return typeof Element<"u"&&Je(e,Element)}function wl(e){return dn(e,"RegExp")}function Gr(e){return!!(e?.then&&typeof e.then=="function")}function Tl(e){return kn(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Je(e,t){try{return e instanceof t}catch{return!1}}function Wa(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function za(e){return typeof Request<"u"&&Je(e,Request)}const _i=G,kl=80;function Ze(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||kl;for(;n&&i++<r&&(u=Il(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Il(e,t){const n=e,r=[];if(!n?.tagName)return"";if(_i.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Xe(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Lt(){try{return _i.document.location.href}catch{return""}}function ja(e){if(!_i.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}const _t=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Cl="Sentry Logger ",As=["debug","info","warn","error","log","assert","trace"],kr={};function gt(e){if(!("console"in G))return e();const t=G.console,n={},r=Object.keys(kr);r.forEach(s=>{const i=kr[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Rl(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return _t?As.forEach(n=>{t[n]=(...r)=>{e&&gt(()=>{G.console[n](`${Cl}[${n}]:`,...r)})}}):As.forEach(n=>{t[n]=()=>{}}),t}const E=jr("logger",Rl);function Ir(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Zi(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Wa(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function xl(e,t,n=!1){return Xe(e)?wl(t)?t.test(e):Xe(t)?n?e===t:e.includes(t):!1:!1}function lt(e,t=[],n=!1){return t.some(r=>xl(e,r,n))}function ke(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&qa(s,r);try{e[t]=s}catch{_t&&E.log(`Failed to replace method "${t}" in object`,e)}}function Me(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{_t&&E.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function qa(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Me(e,"__sentry_original__",t)}catch{}}function gi(e){return e.__sentry_original__}function Ga(e){if(pi(e))return{message:e.message,name:e.name,stack:e.stack,...eo(e)};if(qr(e)){const t={type:e.type,target:Qi(e.target),currentTarget:Qi(e.currentTarget),...eo(e)};return typeof CustomEvent<"u"&&Je(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Qi(e){try{return vl(e)?Ze(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function eo(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Ml(e,t=40){const n=Object.keys(Ga(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Ir(r,t);for(let s=n.length;s>0;s--){const i=n.slice(0,s).join(", ");if(!(i.length>t))return s===n.length?i:Ir(i,t)}return""}function Al(){const e=G;return e.crypto||e.msCrypto}function xe(e=Al()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function Va(e){return e.exception?.values?.[0]}function Et(e){const{message:t,event_id:n}=e;if(t)return t;const r=Va(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ns(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Qt(e,t){const n=Va(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s?.data,...t.data};n.mechanism.data=i}}function to(e){if(Nl(e))return!0;try{Me(e,"__sentry_captured__",!0)}catch{}return!1}function Nl(e){try{return e.__sentry_captured__}catch{}}const Ya=1e3;function Dn(){return Date.now()/Ya}function Ol(){const{performance:e}=G;if(!e?.now)return Dn;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/Ya}const ve=Ol();let cs;function Dl(){const{performance:e}=G;if(!e?.now)return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function Ae(){return cs||(cs=Dl()),cs[0]}function Ll(e){const t=ve(),n={sid:xe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Fl(n)};return e&&en(n,e),n}function en(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ve(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:xe()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Pl(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),en(e,n)}function Fl(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Ln(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Ln(r[s],t[s],n-1));return r}const Os="_sentrySpan";function In(e,t){t?Me(e,Os,t):delete e[Os]}function Cr(e){return e[Os]}function ft(){return xe()}function Pn(){return xe().substring(16)}const $l=100;class Qe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ft(),sampleRand:Math.random()}}clone(){const t=new Qe;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,In(t,Cr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&en(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Qe?n.getScopeData():kn(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,In(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ft(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:$l;if(r<=0)return this;const s={timestamp:Dn(),...t,message:t.message?Ir(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Cr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Ln(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||xe();if(!this._client)return E.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||xe();if(!this._client)return E.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||xe();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(E.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Bl(){return jr("defaultCurrentScope",()=>new Qe)}function Ul(){return jr("defaultIsolationScope",()=>new Qe)}class Hl{constructor(t,n){let r;t?r=t:r=new Qe;let s;n?s=n:s=new Qe,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Gr(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function tn(){const e=Dt(),t=zr(e);return t.stack=t.stack||new Hl(Bl(),Ul())}function Wl(e){return tn().withScope(e)}function zl(e,t){const n=tn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function no(e){return tn().withScope(()=>e(tn().getIsolationScope()))}function jl(){return{withIsolationScope:no,withScope:Wl,withSetScope:zl,withSetIsolationScope:(e,t)=>no(t),getCurrentScope:()=>tn().getScope(),getIsolationScope:()=>tn().getIsolationScope()}}function fn(e){const t=zr(e);return t.acs?t.acs:jl()}function ne(){const e=Dt();return fn(e).getCurrentScope()}function Be(){const e=Dt();return fn(e).getIsolationScope()}function Xa(){return jr("globalScope",()=>new Qe)}function yi(...e){const t=Dt(),n=fn(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function $(){return ne().getClient()}function ql(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,i={trace_id:n,span_id:s||Pn()};return r&&(i.parent_span_id=r),i}const ze="sentry.source",Ka="sentry.sample_rate",Mt="sentry.op",pe="sentry.origin",Ds="sentry.idle_span_finish_reason",Vr="sentry.measurement_unit",Yr="sentry.measurement_value",ro="sentry.custom_span_name",Si="sentry.profile_id",Fn="sentry.exclusive_time",Gl="sentry.link.type",Vl=0,Ja=1,de=2;function Yl(e){if(e<400&&e>=100)return{code:Ja};if(e>=400&&e<500)switch(e){case 401:return{code:de,message:"unauthenticated"};case 403:return{code:de,message:"permission_denied"};case 404:return{code:de,message:"not_found"};case 409:return{code:de,message:"already_exists"};case 413:return{code:de,message:"failed_precondition"};case 429:return{code:de,message:"resource_exhausted"};case 499:return{code:de,message:"cancelled"};default:return{code:de,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:de,message:"unimplemented"};case 503:return{code:de,message:"unavailable"};case 504:return{code:de,message:"deadline_exceeded"};default:return{code:de,message:"internal_error"}}return{code:de,message:"unknown_error"}}function Za(e,t){e.setAttribute("http.response.status_code",t);const n=Yl(t);n.message!=="unknown_error"&&e.setStatus(n)}const Qa="_sentryScope",ec="_sentryIsolationScope";function Xl(e,t,n){e&&(Me(e,ec,n),Me(e,Qa,t))}function Rr(e){return{scope:e[Qa],isolationScope:e[ec]}}function At(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const bi="sentry-",Kl=/^sentry-/,Jl=8192;function tc(e){const t=Ql(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(Kl)){const o=s.slice(bi.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Zl(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${bi}${r}`]=s),n),{});return ed(t)}function Ql(e){if(!(!e||!Xe(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=so(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):so(e)}function so(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function ed(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${t},${i}`;return o.length>Jl?(_t&&E.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const nc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function td(e){if(!e)return;const t=e.match(nc);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function nd(e,t){const n=td(e),r=tc(t);if(!n?.traceId)return{traceId:ft(),sampleRand:Math.random()};const s=rd(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function rc(e=ft(),t=Pn(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function rd(e,t){const n=At(t?.sample_rand);if(n!==void 0)return n;const r=At(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}const sc=0,Ei=1;let io=!1;function sd(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=Y(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function id(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:Y(e).parent_span_id,i=Rr(e).scope,o=r?i?.getPropagationContext().propagationSpanId||Pn():t;return{parent_span_id:s,span_id:o,trace_id:n}}function od(e){const{traceId:t,spanId:n}=e.spanContext(),r=Pt(e);return rc(t,n,r)}function ic(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Ei,attributes:i,...s}))}function Ct(e){return typeof e=="number"?oo(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?oo(e.getTime()):ve()}function oo(e){return e>9999999999?e/1e3:e}function Y(e){if(cd(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(ad(e)){const{attributes:r,startTime:s,name:i,endTime:o,parentSpanId:a,status:c,links:u}=e;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:Ct(s),timestamp:Ct(o)||void 0,status:oc(c),op:r[Mt],origin:r[pe],links:ic(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function ad(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function cd(e){return typeof e.getSpanJSON=="function"}function Pt(e){const{traceFlags:t}=e.spanContext();return t===Ei}function oc(e){if(!(!e||e.code===Vl))return e.code===Ja?"ok":e.message||"unknown_error"}const Rt="_sentryChildSpans",Ls="_sentryRootSpan";function ac(e,t){const n=e[Ls]||e;Me(t,Ls,n),e[Rt]?e[Rt].add(t):Me(e,Rt,new Set([t]))}function ud(e,t){e[Rt]&&e[Rt].delete(t)}function fr(e){const t=new Set;function n(r){if(!t.has(r)&&Pt(r)){t.add(r);const s=r[Rt]?Array.from(r[Rt]):[];for(const i of s)n(i)}}return n(e),Array.from(t)}function _e(e){return e[Ls]||e}function we(){const e=Dt(),t=fn(e);return t.getActiveSpan?t.getActiveSpan():Cr(ne())}function Ps(){io||(gt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),io=!0)}const cc=50,Nt="?",ao=/\(error: (.*)\)/,co=/captureMessage|captureException/;function uc(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const c=o[a];if(c.length>1024)continue;const u=ao.test(c)?c.replace(ao,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){i.push(l);break}}if(i.length>=cc+s)break}}return dd(i.slice(s))}}function ld(e){return Array.isArray(e)?uc(...e):e}function dd(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Yn(t).function||"")&&t.pop(),t.reverse(),co.test(Yn(t).function||"")&&(t.pop(),co.test(Yn(t).function||"")&&t.pop()),t.slice(0,cc).map(n=>({...n,filename:n.filename||Yn(t).filename,function:n.function||Nt}))}function Yn(e){return e[e.length-1]||{}}const us="<anonymous>";function et(e){try{return!e||typeof e!="function"?us:e.name||us}catch{return us}}function uo(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const pr={},lo={};function yt(e,t){pr[e]=pr[e]||[],pr[e].push(t)}function St(e,t){if(!lo[e]){lo[e]=!0;try{t()}catch(n){_t&&E.error(`Error while instrumenting ${e}`,n)}}}function Ne(e,t){const n=e&&pr[e];if(n)for(const r of n)try{r(t)}catch(s){_t&&E.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${et(r)}
Error:`,s)}}let ls=null;function lc(e){const t="error";yt(t,e),St(t,fd)}function fd(){ls=G.onerror,G.onerror=function(e,t,n,r,s){return Ne("error",{column:r,error:s,line:n,msg:e,url:t}),ls?ls.apply(this,arguments):!1},G.onerror.__SENTRY_INSTRUMENTED__=!0}let ds=null;function dc(e){const t="unhandledrejection";yt(t,e),St(t,pd)}function pd(){ds=G.onunhandledrejection,G.onunhandledrejection=function(e){return Ne("unhandledrejection",e),ds?ds.apply(this,arguments):!0},G.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let fo=!1;function hd(){fo||(fo=!0,lc(Fs),dc(Fs))}function Fs(){const e=we(),t=e&&_e(e);if(t){const n="internal_error";F&&E.log(`[Tracing] Root span: ${n} -> Global error occurred`),t.setStatus({code:de,message:n})}}Fs.tag="sentry_tracingErrorCallback";function pt(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||$()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const vi="production",fc="_frozenDsc";function hr(e,t){Me(e,fc,t)}function pc(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||vi,release:n.release,public_key:r,trace_id:e};return t.emit("createDsc",s),s}function hc(e,t){const n=t.getPropagationContext();return n.dsc||pc(n.traceId,e)}function tt(e){const t=$();if(!t)return{};const n=_e(e),r=Y(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[Ka];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[fc];if(c)return a(c);const u=i?.get("sentry.dsc"),d=u&&tc(u);if(d)return a(d);const l=pc(e.spanContext().traceId,t),f=s[ze],p=r.description;return f!=="url"&&p&&(l.transaction=p),pt()&&(l.sampled=String(Pt(n)),l.sample_rand=i?.get("sentry.sample_rand")??Rr(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}class Ot{constructor(t={}){this._traceId=t.traceId||ft(),this._spanId=t.spanId||Pn()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:sc}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function md(e){if(!F)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Y(e),{spanId:s}=e.spanContext(),i=Pt(e),o=_e(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=Y(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}E.log(`${c}
  ${u.join(`
  `)}`)}function _d(e){if(!F)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Y(e),{spanId:r}=e.spanContext(),i=_e(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;E.log(o)}function gd(e,t,n){if(!pt(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const i=At(s);if(i===void 0)return F&&E.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return F&&E.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||F&&E.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const yd=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Sd(e){return e==="http"||e==="https"}function $n(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function bd(e){const t=yd.exec(e);if(!t){gt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return mc({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function mc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ed(e){if(!_t)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(E.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Sd(r)?t&&isNaN(parseInt(t,10))?(E.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(E.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(E.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function vd(e){const t=typeof e=="string"?bd(e):mc(e);if(!(!t||!Ed(t)))return t}function Fe(e,t=100,n=1/0){try{return $s("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function _c(e,t=3,n=100*1024){const r=Fe(e,t);return Id(r)>n?_c(e,t-1,n):r}function $s(e,t,n=1/0,r=1/0,s=Cd()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=wd(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return $s("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=Ga(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=$s(p,h,c-1,r,s),l++}return o(t),d}function wd(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Wa(t))return"[VueViewModel]";if(Tl(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${et(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Td(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Td(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function kd(e){return~-encodeURI(e).split(/%..|./).length}function Id(e){return kd(JSON.stringify(e))}function Cd(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function Ft(e,t=[]){return[e,t]}function Rd(e,t){const[n,r]=e;return[n,[...r,t]]}function po(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Bs(e){const t=zr(G);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function xd(e){const[t,n]=e;let r=JSON.stringify(t);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[Bs(r),i]:r.push(typeof i=="string"?Bs(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Fe(a))}s(c)}}return typeof r=="string"?r:Md(r)}function Md(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Ad(e){return[{type:"span"},e]}function Nd(e){const t=typeof e.data=="string"?Bs(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Od={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",otel_log:"log_item"};function ho(e){return Od[e]}function wi(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function gc(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:$n(r)},...s&&{trace:s}}}function Dd(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Ld(e,t,n,r){const s=wi(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:$n(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Ft(i,[o])}function Pd(e,t,n,r){const s=wi(n),i=e.type&&e.type!=="replay_event"?e.type:"event";Dd(e,n?.sdk);const o=gc(e,s,r,t);return delete e.sdkProcessingMetadata,Ft(o,[[{type:i},e]])}function Fd(e,t){function n(d){return!!d.trace_id&&!!d.public_key}const r=tt(e[0]),s=t?.getDsn(),i=t?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:$n(s)}},a=t?.getOptions().beforeSendSpan,c=a?d=>{const l=Y(d),f=a(l);return f||(Ps(),l)}:Y,u=[];for(const d of e){const l=c(d);l&&u.push(Ad(l))}return Ft(o,u)}function $d(e,t,n,r=we()){const s=r&&_e(r);s&&(F&&E.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Yr]:t,[Vr]:n}))}function mo(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Vr],i=r[Yr];typeof s=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:s})}),t}const _o=1e3;class Ti{constructor(t={}){this._traceId=t.traceId||ft(),this._spanId=t.spanId||Pn(),this._startTime=t.startTimestamp||ve(),this._links=t.links,this._attributes={},this.setAttributes({[pe]:"manual",[Mt]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Ei:sc}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Ct(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ze,"custom"),this}end(t){this._endTime||(this._endTime=Ct(t),_d(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Mt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:oc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[pe],profile_id:this._attributes[Si],exclusive_time:this._attributes[Fn],measurements:mo(this._events),is_segment:this._isStandaloneSpan&&_e(this)===this||void 0,segment_id:this._isStandaloneSpan?_e(this).spanContext().spanId:void 0,links:ic(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){F&&E.log("[Tracing] Adding an event to span:",t);const s=go(n)?n:r||ve(),i=go(n)?{}:n||{},o={name:t,time:Ct(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=$();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===_e(this)))return;if(this._isStandaloneSpan){this._sampled?Ud(Fd([this],t)):(F&&E.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Rr(this).scope||ne()).captureEvent(r)}_convertSpanToTransaction(){if(!yo(Y(this)))return;this._name||(F&&E.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Rr(this);if(this._sampled!==!0)return;const s=fr(this).filter(u=>u!==this&&!Bd(u)).map(u=>Y(u)).filter(yo),i=this._attributes[ze];delete this._attributes[ro],s.forEach(u=>{delete u.data[ro]});const o={contexts:{trace:sd(this)},spans:s.length>_o?s.sort((u,d)=>u.start_timestamp-d.start_timestamp).slice(0,_o):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:tt(this)},...i&&{transaction_info:{source:i}}},a=mo(this._events);return a&&Object.keys(a).length&&(F&&E.log("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2)),o.measurements=a),o}}function go(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function yo(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Bd(e){return e instanceof Ti&&e.isStandaloneSpan()}function Ud(e){const t=$();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}const yc="__SENTRY_SUPPRESS_TRACING__";function Bn(e){const t=bc();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Wd(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?o=>yi(e.scope,o):s!==void 0?o=>Sc(s,o):o=>o())(()=>{const o=ne(),a=jd(o);return e.onlyIfParent&&!a?new Ot:Hd({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function Sc(e,t){const n=bc();return n.withActiveSpan?n.withActiveSpan(e,t):yi(r=>(In(r,e||void 0),t(r)))}function Hd({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!pt()){const o=new Ot;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...tt(o)};hr(o,a)}return o}const s=Be();let i;if(e&&!n)i=zd(e,r,t),ac(e,i);else if(e){const o=tt(e),{traceId:a,spanId:c}=e.spanContext(),u=Pt(e);i=So({traceId:a,parentSpanId:c,...t},r,u),hr(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=So({traceId:o,parentSpanId:c,...t},r,u),a&&hr(i,a)}return md(i),Xl(i,r,s),i}function Wd(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Ct(e.startTime),delete r.startTime,r}return n}function bc(){const e=Dt();return fn(e)}function So(e,t,n){const r=$(),s=r?.getOptions()||{},{name:i="",attributes:o}=e,a=t.getPropagationContext(),[c,u,d]=t.getScopeData().sdkProcessingMetadata[yc]?[!1]:gd(s,{name:i,parentSampled:n,attributes:o,parentSampleRate:At(a.dsc?.sample_rate)},a.sampleRand),l=new Ti({...e,attributes:{[ze]:"custom",[Ka]:u!==void 0&&d?u:void 0,...e.attributes},sampled:c});return!c&&r&&(F&&E.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",l),l}function zd(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[yc]?!1:Pt(e),o=i?new Ti({...n,parentSpanId:r,traceId:s,sampled:i}):new Ot({traceId:s});ac(e,o);const a=$();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function jd(e){const t=Cr(e);if(!t)return;const n=$();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?_e(t):t}const mr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},qd="heartbeatFailed",Gd="idleTimeout",Vd="finalTimeout",Yd="externalFinish";function Ec(e,t={}){const n=new Map;let r=!1,s,i=Yd,o=!t.disableAutoFinish;const a=[],{idleTimeout:c=mr.idleTimeout,finalTimeout:u=mr.finalTimeout,childSpanTimeout:d=mr.childSpanTimeout,beforeSpanEnd:l}=t,f=$();if(!f||!pt()){const y=new Ot,k={sample_rate:"0",sampled:"false",...tt(y)};return hr(y,k),y}const p=ne(),h=we(),m=Xd(e);m.end=new Proxy(m.end,{apply(y,k,w){if(l&&l(m),k instanceof Ot)return;const[S,...T]=w,I=S||ve(),b=Ct(I),R=fr(m).filter(D=>D!==m);if(!R.length)return x(b),Reflect.apply(y,k,[b,...T]);const P=R.map(D=>Y(D).timestamp).filter(D=>!!D),W=P.length?Math.max(...P):void 0,M=Y(m).start_timestamp,Z=Math.min(M?M+u/1e3:1/0,Math.max(M||-1/0,Math.min(b,W||1/0)));return x(Z),Reflect.apply(y,k,[Z,...T])}});function _(){s&&(clearTimeout(s),s=void 0)}function g(y){_(),s=setTimeout(()=>{!r&&n.size===0&&o&&(i=Gd,m.end(y))},c)}function v(y){s=setTimeout(()=>{!r&&o&&(i=qd,m.end(y))},d)}function A(y){_(),n.set(y,!0);const k=ve();v(k+d/1e3)}function C(y){if(n.has(y)&&n.delete(y),n.size===0){const k=ve();g(k+c/1e3)}}function x(y){r=!0,n.clear(),a.forEach(b=>b()),In(p,h);const k=Y(m),{start_timestamp:w}=k;if(!w)return;k.data[Ds]||m.setAttribute(Ds,i),E.log(`[Tracing] Idle span "${k.op}" finished`);const T=fr(m).filter(b=>b!==m);let I=0;T.forEach(b=>{b.isRecording()&&(b.setStatus({code:de,message:"cancelled"}),b.end(y),F&&E.log("[Tracing] Cancelling span since span ended early",JSON.stringify(b,void 0,2)));const R=Y(b),{timestamp:P=0,start_timestamp:W=0}=R,M=W<=y,Z=(u+c)/1e3,D=P-W<=Z;if(F){const K=JSON.stringify(b,void 0,2);M?D||E.log("[Tracing] Discarding span since it finished after idle span final timeout",K):E.log("[Tracing] Discarding span since it happened after idle span was finished",K)}(!D||!M)&&(ud(m,b),I++)}),I>0&&m.setAttribute("sentry.idle_span_discarded_spans",I)}return a.push(f.on("spanStart",y=>{if(r||y===m||Y(y).timestamp)return;fr(m).includes(y)&&A(y.spanContext().spanId)})),a.push(f.on("spanEnd",y=>{r||C(y.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",y=>{y===m&&(o=!0,g(),n.size&&v())})),t.disableAutoFinish||g(),setTimeout(()=>{r||(m.setStatus({code:de,message:"deadline_exceeded"}),i=Vd,m.end())},u),m}function Xd(e){const t=Bn(e);return In(ne(),t),F&&E.log("[Tracing] Started span is an idle span"),t}var Ve;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Ve||(Ve={}));function nt(e){return new ht(t=>{t(e)})}function xr(e){return new ht((t,n)=>{n(e)})}class ht{constructor(t){this._state=Ve.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new ht((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ht((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===Ve.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ve.RESOLVED&&n[1](this._value),this._state===Ve.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===Ve.PENDING){if(Gr(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(Ve.RESOLVED,i)},s=i=>{n(Ve.REJECTED,i)};try{t(r,s)}catch(i){s(i)}}}function Us(e,t,n,r=0){return new ht((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);F&&o.id&&a===null&&E.log(`Event processor "${o.id}" dropped event`),Gr(a)?a.then(c=>Us(e,c,n,r+1).then(s)).then(null,i):Us(e,a,n,r+1).then(s).then(null,i)}})}let Xn,bo,Kn;function Kd(e){const t=G._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Kn&&n.length===bo||(bo=n.length,Kn=n.reduce((r,s)=>{Xn||(Xn={});const i=Xn[s];if(i)r[i[0]]=i[1];else{const o=e(s);for(let a=o.length-1;a>=0;a--){const u=o[a]?.filename,d=t[s];if(u&&d){r[u]=d,Xn[s]=[u,d];break}}}return r},{})),Kn}function Jd(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;Zd(e,t),r&&tf(e,r),nf(e,n),Qd(e,s),ef(e,i)}function Eo(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:h}=t;Jn(e,"extra",n),Jn(e,"tags",r),Jn(e,"user",s),Jn(e,"contexts",i),e.sdkProcessingMetadata=Ln(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function Jn(e,t,n){e[t]=Ln(e[t],n,1)}function Zd(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function Qd(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ef(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function tf(e,t){e.contexts={trace:id(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:tt(t),...e.sdkProcessingMetadata};const n=_e(t),r=Y(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function nf(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function vc(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||xe(),timestamp:t.timestamp||Dn()},u=n.integrations||e.integrations.map(_=>_.name);rf(c,e),af(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&sf(c,e.stackParser);const d=uf(r,n.captureContext);n.mechanism&&Qt(c,n.mechanism);const l=s?s.getEventProcessors():[],f=Xa().getScopeData();if(i){const _=i.getScopeData();Eo(f,_)}if(d){const _=d.getScopeData();Eo(f,_)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),Jd(c,f);const h=[...l,...f.eventProcessors];return Us(h,c,n).then(_=>(_&&of(_),typeof o=="number"&&o>0?cf(_,o,a):_))}function rf(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||vi,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&(o.url=Ir(o.url,i))}function sf(e,t){const n=Kd(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function of(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function af(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function cf(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Fe(s.data,t,n)}}))},...e.user&&{user:Fe(e.user,t,n)},...e.contexts&&{contexts:Fe(e.contexts,t,n)},...e.extra&&{extra:Fe(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Fe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:Fe(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Fe(e.contexts.flags,3,n)),r}function uf(e,t){if(!t)return e;const n=e?e.clone():new Qe;return n.update(t),n}function wc(e,t){return ne().captureException(e,void 0)}function Tc(e,t){return ne().captureEvent(e,t)}function lf(e,t){Be().setContext(e,t)}function df(){const e=$();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function ff(e){Be().addEventProcessor(e)}function vo(e){const t=Be(),n=ne(),{userAgent:r}=G.navigator||{},s=Ll({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&en(i,{status:"exited"}),kc(),t.setSession(s),s}function kc(){const e=Be(),n=ne().getSession()||e.getSession();n&&Pl(n),Ic(),e.setSession()}function Ic(){const e=Be(),t=$(),n=e.getSession();n&&t&&t.captureSession(n)}function wo(e=!1){if(e){kc();return}Ic()}const pf="7";function hf(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function mf(e){return`${hf(e)}${e.projectId}/envelope/`}function _f(e,t){const n={sentry_version:pf};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function gf(e,t,n){return t||`${mf(e)}?${_f(e,n)}`}const To=[];function yf(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Sf(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return yf(r)}function bf(e,t){const n={};return t.forEach(r=>{r&&Cc(e,r,n)}),n}function ko(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Cc(e,t,n){if(n[t.name]){F&&E.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,To.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),To.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}F&&E.log(`Integration installed: ${t.name}`)}function Io(e){const t=$();if(!t){F&&E.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Rc(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Ef(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[Si],exclusive_time:o?.[Fn],measurements:e.measurements,is_segment:!0}}function vf(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Si]:e.profile_id},...e.exclusive_time&&{[Fn]:e.exclusive_time}}}},measurements:e.measurements}}function wf(e,t,n){const r=[{type:"client_report"},{timestamp:Dn(),discarded_events:e}];return Ft(t?{dsn:t}:{},[r])}const Co="Not capturing exception because it's already been captured.",Ro="Discarded session because of missing or non-string release",xc=Symbol.for("SentryInternalError"),Mc=Symbol.for("SentryDoNotSendEventError");function _r(e){return{message:e,[xc]:!0}}function fs(e){return{message:e,[Mc]:!0}}function xo(e){return!!e&&typeof e=="object"&&xc in e}function Mo(e){return!!e&&typeof e=="object"&&Mc in e}class Tf{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=vd(t.dsn):F&&E.warn("No DSN provided, client will not send events."),this._dsn){const n=gf(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){const s=xe();if(to(t))return F&&E.log(Co),s;const i={event_id:s,...n};return this._process(this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(t,n,r,s){const i={event_id:xe(),...r},o=hi(t)?t:String(t),a=mi(t)?this.eventFromMessage(o,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(t,n,r){const s=xe();if(n?.originalException&&to(n.originalException))return F&&E.log(Co),s;const i={event_id:s,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),en(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):nt(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Cc(this,t,this._integrations),n||ko(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Pd(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=Rd(r,Nd(i));const s=this.sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const{release:n,environment:r=vi}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!n){F&&E.warn(Ro);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){F&&E.warn(Ro);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=Ld(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;F&&E.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(F&&E.error("Error while sending envelope:",n),n)):(F&&E.error("Transport disabled"),nt({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=bf(this,t),ko(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const i=n.exception?.values;if(i){s=!0;for(const c of i)if(c.mechanism?.handled===!1){r=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(en(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new ht(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),vc(i,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:ql(r),...a.contexts};const c=hc(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=ne(),s=Be()){return F&&Hs(t)&&E.log(`Captured error event \`${Rc(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(i=>i.event_id,i=>{F&&(Mo(i)?E.log(i.message):xo(i)?E.warn(i.message):E.warn(i))})}_processEvent(t,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=Ac(t),c=Hs(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof o>"u"?void 0:At(o);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),xr(fs(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),fs("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=If(this,i,p,n);return kf(m,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const g=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",g)}throw fs(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const _=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,g=p.spans?p.spans.length:0,v=_-g;v>0&&this.recordDroppedEvent("before_send","span",v)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const _="custom";p.transaction_info={...m,source:_}}return this.sendEvent(p,n),p}).then(null,p=>{throw Mo(p)||xo(p)?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),_r(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){F&&E.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){F&&E.log("No outcomes to send");return}if(!this._dsn){F&&E.log("No dsn provided, will not send outcomes");return}F&&E.log("Sending outcomes:",t);const n=wf(t,this._options.tunnel&&$n(this._dsn));this.sendEnvelope(n)}}function kf(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Gr(e))return e.then(r=>{if(!kn(r)&&r!==null)throw _r(n);return r},r=>{throw _r(`${t} rejected with ${r}`)});if(!kn(e)&&e!==null)throw _r(n);return e}function If(e,t,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=n;if(Hs(a)&&s)return s(a,r);if(Ac(a)){if(o){const c=o(Ef(a));if(c?a=Ln(n,vf(c)):Ps(),a.spans){const u=[];for(const d of a.spans){const l=o(d);l?u.push(l):(Ps(),u.push(d))}a.spans=u}}if(i){if(a.spans){const c=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return i(a,r)}}return a}function Hs(e){return e.type===void 0}function Ac(e){return e.type==="transaction"}function Cf(e){return[{type:"otel_log"},e]}function Rf(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=$n(r)),Ft(s,e.map(Cf))}const xf=new WeakMap;function ps(e,t){const n=xf.get(e)??[];if(n.length===0)return;const r=e.getOptions(),s=Rf(n,r._metadata,r.tunnel,e.getDsn());n.length=0,e.emit("flushLogs"),e.sendEnvelope(s)}function Mf(e,t){t.debug===!0&&(F?E.enable():gt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ne().update(t.initialScope);const r=new e(t);return Af(r),r.init(),r}function Af(e){ne().setClient(e)}const Nc=Symbol.for("SentryBufferFullError");function Nf(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!n())return xr(Nc);const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new ht((a,c)=>{let u=t.length;if(!u)return a(!0);const d=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(l=>{nt(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:s,drain:i}}const Of=60*1e3;function Df(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Of:r-t}function Lf(e,t){return e[t]||e.all||0}function Oc(e,t,n=Date.now()){return Lf(e,t)>n}function Dc(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+Df(o,r):t===429&&(s.all=r+60*1e3);return s}const Pf=64;function Ff(e,t,n=Nf(e.bufferSize||Pf)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(po(o,(l,f)=>{const p=ho(f);Oc(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return nt({});const c=Ft(o[0],a),u=l=>{po(c,(f,p)=>{e.recordDroppedEvent(l,ho(p))})},d=()=>t({body:xd(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&F&&E.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Dc(r,l),l),l=>{throw u("network_error"),F&&E.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Nc)return F&&E.error("Skipped sending event because buffer is full."),u("queue_overflow"),nt({});throw l})}return{send:i,flush:s}}function $f(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return Uf(e,n)||Bf(e,r)}function Bf(e,t){return t?Ao(e)===Ao(t):!1}function Uf(e,t){return t?e.includes(t.host):!1}function Ao(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Hf(e){e.user?.ip_address===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Wf(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Lc(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:It})),version:It}),e._metadata=s}function Pc(e={}){const t=$();if(!df()||!t)return{};const n=Dt(),r=fn(n);if(r.getTraceData)return r.getTraceData(e);const s=ne(),i=e.span||we(),o=i?od(i):zf(s),a=i?tt(i):hc(t,s),c=Zl(a);return nc.test(o)?{"sentry-trace":o,baggage:c}:(E.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function zf(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return rc(t,r,n)}const jf=100;function mt(e,t){const n=$(),r=Be();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=jf}=n.getOptions();if(i<=0)return;const a={timestamp:Dn(),...e},c=s?gt(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}let No;const qf="FunctionToString",Oo=new WeakMap,Gf=()=>({name:qf,setupOnce(){No=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=gi(this),n=Oo.has($())&&t!==void 0?t:this;return No.apply(n,e)}}catch{}},setup(e){Oo.set(e,!0)}}),Vf=Gf,Yf=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Xf="EventFilters",Kf=(e={})=>{let t;return{name:Xf,setup(n){const r=n.getOptions();t=Do(e,r)},processEvent(n,r,s){if(!t){const i=s.getOptions();t=Do(e,i)}return Zf(n,t)?null:n}}},Jf=(e={})=>({...Kf(e),name:"InboundFilters"});function Do(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Yf],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Zf(e,t){if(e.type){if(e.type==="transaction"&&ep(e,t.ignoreTransactions))return F&&E.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Et(e)}`),!0}else{if(Qf(e,t.ignoreErrors))return F&&E.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Et(e)}`),!0;if(sp(e))return F&&E.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Et(e)}`),!0;if(tp(e,t.denyUrls))return F&&E.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Et(e)}.
Url: ${Mr(e)}`),!0;if(!np(e,t.allowUrls))return F&&E.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Et(e)}.
Url: ${Mr(e)}`),!0}return!1}function Qf(e,t){return t?.length?Rc(e).some(n=>lt(n,t)):!1}function ep(e,t){if(!t?.length)return!1;const n=e.transaction;return n?lt(n,t):!1}function tp(e,t){if(!t?.length)return!1;const n=Mr(e);return n?lt(n,t):!1}function np(e,t){if(!t?.length)return!0;const n=Mr(e);return n?lt(n,t):!0}function rp(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Mr(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?rp(n):null}catch{return F&&E.error(`Cannot extract url for event ${Et(e)}`),null}}function sp(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function ip(e,t,n,r,s,i){if(!s.exception?.values||!i||!Je(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=Ws(e,t,r,i.originalException,n,s.exception.values,o,0))}function Ws(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Je(r[s],Error)){Lo(o,a);const u=e(t,r[s]),d=c.length;Po(u,s,d,a),c=Ws(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Je(u,Error)){Lo(o,a);const l=e(t,u),f=c.length;Po(l,`errors[${d}]`,f,a),c=Ws(e,t,n,u,s,[l,...c],l,f)}}),c}function Lo(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Po(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function op(e){const t="console";yt(t,e),St(t,ap)}function ap(){"console"in G&&As.forEach(function(e){e in G.console&&ke(G.console,e,function(t){return kr[e]=t,function(...n){Ne("console",{args:n,level:e}),kr[e]?.apply(G.console,n)}})})}function Fc(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const cp="Dedupe",up=()=>{let e;return{name:cp,processEvent(t){if(t.type)return t;try{if(dp(t,e))return F&&E.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},lp=up;function dp(e,t){return t?!!(fp(e,t)||pp(e,t)):!1}function fp(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Bc(e,t)||!$c(e,t))}function pp(e,t){const n=Fo(t),r=Fo(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Bc(e,t)||!$c(e,t))}function $c(e,t){let n=uo(e),r=uo(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Bc(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Fo(e){return e.exception?.values&&e.exception.values[0]}const hp="thismessage:/";function Uc(e){return"isRelative"in e}function mp(e,t){const n=e.startsWith("/"),r=n?hp:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function _p(e){if(Uc(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function xt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function gp(e){return e.split(/[?#]/,1)[0]}function yp(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,a=pt()&&t(o);if(e.endTimestamp&&a){const l=e.fetchData.__span;if(!l)return;const f=r[l];f&&(bp(f,e),delete r[l]);return}const c=!!we(),u=a&&c?Bn(vp(o,i,s)):new Ot;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const l=e.args[0],f=e.args[1]||{},p=Sp(l,f,pt()&&c?u:void 0);p&&(e.args[1]=f,f.headers=p)}const d=$();if(d){const l={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};d.emit("beforeOutgoingRequestSpan",u,l)}return u}function Sp(e,t,n){const r=Pc({span:n}),s=r["sentry-trace"],i=r.baggage;if(!s)return;const o=t.headers||(za(e)?e.headers:void 0);if(o)if(Ep(o)){const a=new Headers(o);if(a.set("sentry-trace",s),i){const c=a.get("baggage");if(c){const u=Zn(c);a.set("baggage",u?`${u},${i}`:i)}else a.set("baggage",i)}return a}else if(Array.isArray(o)){const a=[...o.filter(c=>!(Array.isArray(c)&&c[0]==="sentry-trace")).map(c=>{if(Array.isArray(c)&&c[0]==="baggage"&&typeof c[1]=="string"){const[u,d,...l]=c;return[u,Zn(d),...l]}else return c}),["sentry-trace",s]];return i&&a.push(["baggage",i]),a}else{const a="baggage"in o?o.baggage:void 0;let c=[];return Array.isArray(a)?c=a.map(u=>typeof u=="string"?Zn(u):u).filter(u=>u===""):a&&c.push(Zn(a)),i&&c.push(i),{...o,"sentry-trace":s,baggage:c.length>0?c.join(","):void 0}}else return{...r}}function bp(e,t){if(t.response){Za(e,t.response.status);const n=t.response?.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:de,message:"internal_error"});e.end()}function Zn(e){return e.split(",").filter(t=>!t.split("=")[0].startsWith(bi)).join(",")}function Ep(e){return typeof Headers<"u"&&Je(e,Headers)}function vp(e,t,n){const r=mp(e);return{name:r?`${t} ${_p(r)}`:t,attributes:wp(e,r,t,n)}}function wp(e,t,n,r){const s={url:e,type:"fetch","http.method":n,[pe]:r,[Mt]:"http.client"};return t&&(Uc(t)||(s["http.url"]=t.href,s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function Tp(e,t={},n=ne()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||$();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function Hc(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Cn=G;function kp(){return"history"in Cn&&!!Cn.history}function Wc(){if(!("fetch"in Cn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function zs(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ip(){if(typeof EdgeRuntime=="string")return!0;if(!Wc())return!1;if(zs(Cn.fetch))return!0;let e=!1;const t=Cn.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=zs(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){_t&&E.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function zc(e,t){const n="fetch";yt(n,e),St(n,()=>jc(void 0,t))}function Cp(e){const t="fetch-body-resolved";yt(t,e),St(t,()=>jc(xp))}function jc(e,t=!1){t&&!Ip()||ke(G,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=Mp(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:ve()*1e3,virtualError:s,headers:Ap(r)};return e||Ne("fetch",{...a}),n.apply(G,r).then(async c=>(e?e(c):Ne("fetch",{...a,endTimestamp:ve()*1e3,response:c}),c),c=>{if(Ne("fetch",{...a,endTimestamp:ve()*1e3,error:c}),pi(c)&&c.stack===void 0&&(c.stack=s.stack,Me(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function Rp(e,t){if(e?.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function xp(e){let t;try{t=e.clone()}catch{return}Rp(t,()=>{Ne("fetch-body-resolved",{endTimestamp:ve()*1e3,response:e})})}function js(e,t){return!!e&&typeof e=="object"&&!!e[t]}function $o(e){return typeof e=="string"?e:e?js(e,"url")?e.url:e.toString?e.toString():"":""}function Mp(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:$o(n),method:js(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:$o(t),method:js(t,"method")?String(t.method).toUpperCase():"GET"}}function Ap(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(za(t))return new Headers(t.headers)}catch{}}function Np(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Op(){return"npm"}function Dp(){return!Np()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function qs(){return typeof window<"u"&&(!Dp()||Lp())}function Lp(){return G.process?.type==="renderer"}const $e=G,Q=$e.document,Sn=$e.navigator,qc="Report a Bug",Pp="Cancel",Fp="Send Bug Report",$p="Confirm",Bp="Report a Bug",Up="your.email@example.org",Hp="Email",Wp="What's the bug? What did you expect?",zp="Description",jp="Your Name",qp="Name",Gp="Thank you for your report!",Vp="(required)",Yp="Add a screenshot",Xp="Remove screenshot",Kp="widget",Jp="api",Zp=5e3,Qp=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=$();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&ne().setTags(e.tags);const r=Tp({source:Jp,url:Lt(),...e},t);return new Promise((s,i)=>{const o=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),5e3),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(o),a(),u&&typeof u.statusCode=="number"&&u.statusCode>=200&&u.statusCode<300?s(r):u&&typeof u.statusCode=="number"&&u.statusCode===0?i("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):u&&typeof u.statusCode=="number"&&u.statusCode===403?i("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")})})},gr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function eh(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Sn.userAgent)||/Macintosh/i.test(Sn.userAgent)&&Sn.maxTouchPoints&&Sn.maxTouchPoints>1||!isSecureContext)}function Qn(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:n=>{t.onSubmitSuccess?.(n),e.onSubmitSuccess?.(n)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function th(e){const t=Q.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Re(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const jt=20,nh="http://www.w3.org/2000/svg";function rh(){const e=a=>$e.document.createElementNS(nh,a),t=Re(e("svg"),{width:`${jt}`,height:`${jt}`,viewBox:`0 0 ${jt} ${jt}`,fill:"var(--actor-color, var(--foreground))"}),n=Re(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Re(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=Re(e("clipPath"),{id:"clip0_57_80"}),o=Re(e("rect"),{width:`${jt}`,height:`${jt}`,fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),t}function sh({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=Q.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||qc,s.appendChild(rh()),e){const o=Q.createElement("span");o.appendChild(Q.createTextNode(e)),s.appendChild(o)}const i=th(r);return{el:s,appendToDom(){n.appendChild(i),n.appendChild(s)},removeFromDom(){n.removeChild(s),n.removeChild(i)},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const Gc="rgba(88, 74, 192, 1)",ih={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Gc,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Bo={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Gc,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Uo(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function oh({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=Q.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Uo(e==="dark"?{...Bo,...t}:{...ih,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Uo({...Bo,...t})}
  }
}`:""}
}
`,r&&s.setAttribute("nonce",r),s}const ah=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:s="sentry-feedback",autoInject:i=!0,showBranding:o=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:_="system",themeLight:g={},themeDark:v={},addScreenshotButtonLabel:A=Yp,cancelButtonLabel:C=Pp,confirmButtonLabel:x=$p,emailLabel:y=Hp,emailPlaceholder:k=Up,formTitle:w=Bp,isRequiredLabel:S=Vp,messageLabel:T=zp,messagePlaceholder:I=Wp,nameLabel:b=qp,namePlaceholder:R=jp,removeScreenshotButtonLabel:P=Xp,submitButtonLabel:W=Fp,successMessageText:M=Gp,triggerLabel:Z=qc,triggerAriaLabel:D="",onFormOpen:K,onFormClose:J,onSubmitSuccess:ge,onSubmitError:Ut,onFormSubmitted:Ie}={})=>{const ye={id:s,autoInject:i,showBranding:o,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:_,themeDark:v,themeLight:g,triggerLabel:Z,triggerAriaLabel:D,cancelButtonLabel:C,submitButtonLabel:W,confirmButtonLabel:x,formTitle:w,emailLabel:y,emailPlaceholder:k,messageLabel:T,messagePlaceholder:I,nameLabel:b,namePlaceholder:R,successMessageText:M,isRequiredLabel:S,addScreenshotButtonLabel:A,removeScreenshotButtonLabel:P,onFormClose:J,onFormOpen:K,onSubmitError:Ut,onSubmitSuccess:ge,onFormSubmitted:Ie};let De=null,qe=[];const Ht=ie=>{if(!De){const he=Q.createElement("div");he.id=String(ie.id),Q.body.appendChild(he),De=he.attachShadow({mode:"open"}),De.appendChild(oh(ie))}return De},Wt=async ie=>{const he=ie.enableScreenshot&&eh();let Ue,ce;try{Ue=(t?t():await e("feedbackModalIntegration",m))(),Io(Ue)}catch{throw gr&&E.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const He=he?n?n():await e("feedbackScreenshotIntegration",m):void 0;He&&(ce=He(),Io(ce))}catch{gr&&E.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const le=Ue.createDialog({options:{...ie,onFormClose:()=>{le?.close(),ie.onFormClose?.()},onFormSubmitted:()=>{le?.close(),ie.onFormSubmitted?.()}},screenshotIntegration:ce,sendFeedback:Qp,shadow:Ht(ie)});return le},gn=(ie,he={})=>{const Ue=Qn(ye,he),ce=typeof ie=="string"?Q.querySelector(ie):typeof ie.addEventListener=="function"?ie:null;if(!ce)throw gr&&E.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let le=null;const He=async()=>{le||(le=await Wt({...Ue,onFormSubmitted:()=>{le?.removeFromDom(),Ue.onFormSubmitted?.()}})),le.appendToDom(),le.open()};ce.addEventListener("click",He);const bt=()=>{qe=qe.filter(zt=>zt!==bt),le?.removeFromDom(),le=null,ce.removeEventListener("click",He)};return qe.push(bt),bt},it=(ie={})=>{const he=Qn(ye,ie),Ue=Ht(he),ce=sh({triggerLabel:he.triggerLabel,triggerAriaLabel:he.triggerAriaLabel,shadow:Ue,styleNonce:h});return gn(ce.el,{...he,onFormOpen(){ce.hide()},onFormClose(){ce.show()},onFormSubmitted(){ce.show()}}),ce};return{name:"Feedback",setupOnce(){!qs()||!ye.autoInject||(Q.readyState==="loading"?Q.addEventListener("DOMContentLoaded",()=>it().appendToDom()):it().appendToDom())},attachTo:gn,createWidget(ie={}){const he=it(Qn(ye,ie));return he.appendToDom(),he},async createForm(ie={}){return Wt(Qn(ye,ie))},remove(){De&&(De.parentElement?.remove(),De=null),qe.forEach(ie=>ie()),qe=[]}}};var Xr,te,Vc,vt,Ho,Yc,Gs,Rn={},ki=[],ch=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ii=Array.isArray;function ut(e,t){for(var n in t)e[n]=t[n];return e}function Xc(e){var t=e.parentNode;t&&t.removeChild(e)}function U(e,t,n){var r,s,i,o={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Xr.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return yr(e,o,r,s,null)}function yr(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Vc,__i:-1,__u:0};return s==null&&te.vnode!=null&&te.vnode(i),i}function Un(e){return e.children}function Sr(e,t){this.props=e,this.context=t}function nn(e,t){if(t==null)return e.__?nn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?nn(e):null}function uh(e,t,n){var r,s=e.__v,i=s.__e,o=e.__P;if(o)return(r=ut({},s)).__v=s.__v+1,te.vnode&&te.vnode(r),Ci(o,r,s,e.__n,o.ownerSVGElement!==void 0,32&s.__u?[i]:null,t,i??nn(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Kc(r),r}function Kc(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Kc(e)}}function Wo(e){(!e.__d&&(e.__d=!0)&&vt.push(e)&&!Ar.__r++||Ho!==te.debounceRendering)&&((Ho=te.debounceRendering)||Yc)(Ar)}function Ar(){var e,t,n,r=[],s=[];for(vt.sort(Gs);e=vt.shift();)e.__d&&(n=vt.length,t=uh(e,r,s)||t,n===0||vt.length>n?(Vs(r,t,s),s.length=r.length=0,t=void 0,vt.sort(Gs)):t&&te.__c&&te.__c(t,ki));t&&Vs(r,t,s),Ar.__r=0}function Jc(e,t,n,r,s,i,o,a,c,u,d){var l,f,p,h,m,_=r&&r.__k||ki,g=t.length;for(n.__d=c,lh(n,t,_),c=n.__d,l=0;l<g;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Rn:_[p.__i]||Rn,p.__i=l,Ci(e,p,f,s,i,o,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Ri(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=Zc(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function lh(e,t,n){var r,s,i,o,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?yr(null,s,null,null,s):Ii(s)?yr(Un,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?yr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=dh(s,n,o=r+l,d),s.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==o&&(a===o+1?l++:a>o?d>c-o?l+=a-o:l--:l=a<o&&a==o-1?a-o:0,a!==r+l&&(s.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=nn(i)),Ys(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=nn(i)),Ys(i,i))}function Zc(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Zc(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function dh(e,t,n,r){var s=e.key,i=e.type,o=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return o;o--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return a;a++}}return-1}function zo(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ch.test(t)?n:n+"px"}function er(e,t,n,r,s){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||zo(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||zo(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?qo:jo,i)):e.removeEventListener(t,i?qo:jo,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function jo(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(te.event?te.event(e):e)}}function qo(e){if(this.l)return this.l[e.type+!0](te.event?te.event(e):e)}function Ci(e,t,n,r,s,i,o,a,c,u){var d,l,f,p,h,m,_,g,v,A,C,x,y,k,w,S=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=te.__b)&&d(t);e:if(typeof S=="function")try{if(g=t.props,v=(d=S.contextType)&&r[d.__c],A=d?v?v.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in S&&S.prototype.render?t.__c=l=new S(g,A):(t.__c=l=new Sr(g,A),l.constructor=S,l.render=ph),v&&v.sub(l),l.props=g,l.state||(l.state={}),l.context=A,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),S.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=ut({},l.__s)),ut(l.__s,S.getDerivedStateFromProps(g,l.__s))),p=l.props,h=l.state,l.__v=t,f)S.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(S.getDerivedStateFromProps==null&&g!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,A),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,A)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=g,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(T){T&&(T.__=t)}),C=0;C<l._sb.length;C++)l.__h.push(l._sb[C]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,A),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=A,l.props=g,l.__P=e,l.__e=!1,x=te.__r,y=0,"prototype"in S&&S.prototype.render){for(l.state=l.__s,l.__d=!1,x&&x(t),d=l.render(l.props,l.state,l.context),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[]}else do l.__d=!1,x&&x(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++y<25);l.state=l.__s,l.getChildContext!=null&&(r=ut(ut({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),Jc(e,Ii(w=d!=null&&d.type===Un&&d.key==null?d.props.children:d)?w:[w],t,n,r,s,i,o,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&o.push(l),_&&(l.__E=l.__=null)}catch(T){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),te.__e(T,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=fh(n.__e,t,n,r,s,i,o,c,u);(d=te.diffed)&&d(t)}function Vs(e,t,n){for(var r=0;r<n.length;r++)Ri(n[r],n[++r],n[++r]);te.__c&&te.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){te.__e(i,s.__v)}})}function fh(e,t,n,r,s,i,o,a,c){var u,d,l,f,p,h,m,_=n.props,g=t.props,v=t.type;if(v==="svg"&&(s=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!v&&(v?p.localName===v:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(v===null)return document.createTextNode(g);e=s?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),i=null,a=!1}if(v===null)_===g||a&&e.data===g||(e.data=g);else{if(i=i&&Xr.call(e.childNodes),_=n.props||Rn,!a&&i!=null)for(_={},u=0;u<e.attributes.length;u++)_[(p=e.attributes[u]).name]=p.value;for(u in _)p=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in g||er(e,u,null,p,s));for(u in g)p=g[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||_[u]===p||er(e,u,p,_[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Jc(e,Ii(f)?f:[f],t,n,r,s&&v!=="foreignObject",i,o,i?i[0]:n.__k&&nn(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&Xc(i[u]);a||(u="value",h!==void 0&&(h!==e[u]||v==="progress"&&!h||v==="option"&&h!==_[u])&&er(e,u,h,_[u],!1),u="checked",m!==void 0&&m!==e[u]&&er(e,u,m,_[u],!1))}return e}function Ri(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){te.__e(r,n)}}function Ys(e,t,n){var r,s;if(te.unmount&&te.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ri(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){te.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Ys(r[s],t,n||typeof e.type!="function");n||e.__e==null||Xc(e.__e),e.__=e.__e=e.__d=void 0}function ph(e,t,n){return this.constructor(e,n)}function hh(e,t,n){var r,s,i,o;te.__&&te.__(e,t),s=(r=!1)?null:t.__k,i=[],o=[],Ci(t,e=t.__k=U(Un,null,[e]),s||Rn,Rn,t.ownerSVGElement!==void 0,s?null:t.firstChild?Xr.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,o),e.__d=void 0,Vs(i,e,o)}Xr=ki.slice,te={__e:function(e,t,n,r){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),o=s.__d),o)return s.__E=s}catch(a){e=a}throw e}},Vc=0,Sr.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ut({},this.state),typeof e=="function"&&(e=e(ut({},n),this.props)),e&&ut(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Wo(this))},Sr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Wo(this))},Sr.prototype.render=Un,vt=[],Yc=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gs=function(e,t){return e.__v.__b-t.__v.__b},Ar.__r=0;var rt,ee,hs,Go,rn=0,Qc=[],br=[],oe=te,Vo=oe.__b,Yo=oe.__r,Xo=oe.diffed,Ko=oe.__c,Jo=oe.unmount,Zo=oe.__;function $t(e,t){oe.__h&&oe.__h(ee,e,rn||t),rn=0;var n=ee.__H||(ee.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:br}),n.__[e]}function wt(e){return rn=1,eu(nu,e)}function eu(e,t,n){var r=$t(rt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):nu(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ee,!ee.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};ee.u=!0;var i=ee.shouldComponentUpdate,o=ee.componentWillUpdate;ee.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,s(a,c,u),i=d}o&&o.call(this,a,c,u)},ee.shouldComponentUpdate=s}return r.__N||r.__}function mh(e,t){var n=$t(rt++,3);!oe.__s&&xi(n.__H,t)&&(n.__=e,n.i=t,ee.__H.__h.push(n))}function tu(e,t){var n=$t(rt++,4);!oe.__s&&xi(n.__H,t)&&(n.__=e,n.i=t,ee.__h.push(n))}function _h(e){return rn=5,Hn(function(){return{current:e}},[])}function gh(e,t,n){rn=6,tu(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Hn(e,t){var n=$t(rt++,7);return xi(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Zt(e,t){return rn=8,Hn(function(){return e},t)}function yh(e){var t=ee.context[e.__c],n=$t(rt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ee)),t.props.value):e.__}function Sh(e,t){oe.useDebugValue&&oe.useDebugValue(t?t(e):e)}function bh(e){var t=$t(rt++,10),n=wt();return t.__=e,ee.componentDidCatch||(ee.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Eh(){var e=$t(rt++,11);if(!e.__){for(var t=ee.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function vh(){for(var e;e=Qc.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Er),e.__H.__h.forEach(Xs),e.__H.__h=[]}catch(t){e.__H.__h=[],oe.__e(t,e.__v)}}oe.__b=function(e){ee=null,Vo&&Vo(e)},oe.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Zo&&Zo(e,t)},oe.__r=function(e){Yo&&Yo(e),rt=0;var t=(ee=e.__c).__H;t&&(hs===ee?(t.__h=[],ee.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=br,n.__N=n.i=void 0})):(t.__h.forEach(Er),t.__h.forEach(Xs),t.__h=[],rt=0)),hs=ee},oe.diffed=function(e){Xo&&Xo(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qc.push(t)!==1&&Go===oe.requestAnimationFrame||((Go=oe.requestAnimationFrame)||wh)(vh)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==br&&(n.__=n.__V),n.i=void 0,n.__V=br})),hs=ee=null},oe.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Er),n.__h=n.__h.filter(function(r){return!r.__||Xs(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],oe.__e(r,n.__v)}}),Ko&&Ko(e,t)},oe.unmount=function(e){Jo&&Jo(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Er(r)}catch(s){t=s}}),n.__H=void 0,t&&oe.__e(t,n.__v))};var Qo=typeof requestAnimationFrame=="function";function wh(e){var t,n=function(){clearTimeout(r),Qo&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Qo&&(t=requestAnimationFrame(n))}function Er(e){var t=ee,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ee=t}function Xs(e){var t=ee;e.__c=e.__(),ee=t}function xi(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function nu(e,t){return typeof t=="function"?t(e):t}const Th=Object.defineProperty({__proto__:null,useCallback:Zt,useContext:yh,useDebugValue:Sh,useEffect:mh,useErrorBoundary:bh,useId:Eh,useImperativeHandle:gh,useLayoutEffect:tu,useMemo:Hn,useReducer:eu,useRef:_h,useState:wt},Symbol.toStringTag,{value:"Module"}),kh="http://www.w3.org/2000/svg";function Ih(){const e=r=>Q.createElementNS(kh,r),t=Re(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Re(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function Ch({options:e}){const t=Hn(()=>({__html:Ih().outerHTML}),[]);return U("h2",{class:"dialog__header"},U("span",{class:"dialog__title"},e.formTitle),e.showBranding?U("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function Rh(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function ms(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function xh({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:i,onSubmitError:o,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:_,isNameRequired:g,messageLabel:v,messagePlaceholder:A,nameLabel:C,namePlaceholder:x,submitButtonLabel:y,isRequiredLabel:k}=e,[w,S]=wt(!1),[T,I]=wt(null),[b,R]=wt(!1),P=u?.input,[W,M]=wt(null),Z=Zt(J=>{M(J),R(!1)},[]),D=Zt(J=>{const ge=Rh(J,{emailLabel:h,isEmailRequired:_,isNameRequired:g,messageLabel:v,nameLabel:C});return ge.length>0?I(`Please enter in the following required fields: ${ge.join(", ")}`):I(null),ge.length===0},[h,_,g,v,C]),K=Zt(async J=>{S(!0);try{if(J.preventDefault(),!(J.target instanceof HTMLFormElement))return;const ge=new FormData(J.target),Ut=await(u&&b?u.value():void 0),Ie={name:ms(ge,"name"),email:ms(ge,"email"),message:ms(ge,"message"),attachments:Ut?[Ut]:void 0};if(!D(Ie))return;try{await s({name:Ie.name,email:Ie.email,message:Ie.message,source:Kp,tags:d},{attachments:Ie.attachments}),i(Ie)}catch(ye){gr&&E.error(ye),I(ye),o(ye)}}finally{S(!1)}},[u&&b,i,o]);return U("form",{class:"form",onSubmit:K},P&&b?U(P,{onError:Z}):null,U("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:w},U("div",{class:"form__top"},T?U("div",{class:"form__error-container"},T):null,c?U("label",{for:"name",class:"form__label"},U(_s,{label:C,isRequiredLabel:k,isRequired:g}),U("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:x,required:g,type:"text"})):U("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?U("label",{for:"email",class:"form__label"},U(_s,{label:h,isRequiredLabel:k,isRequired:_}),U("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:_,type:"email"})):U("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),U("label",{for:"message",class:"form__label"},U(_s,{label:v,isRequiredLabel:k,isRequired:!0}),U("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:A,required:!0,rows:5})),P?U("label",{for:"screenshot",class:"form__label"},U("button",{class:"btn btn--default",disabled:w,type:"button",onClick:()=>{M(null),R(J=>!J)}},b?f:l),W?U("div",{class:"form__error-container"},W.message):null):null),U("div",{class:"btn-group"},U("button",{class:"btn btn--primary",disabled:w,type:"submit"},y),U("button",{class:"btn btn--default",disabled:w,type:"button",onClick:r},p))))}function _s({label:e,isRequired:t,isRequiredLabel:n}){return U("span",{class:"form__label__text"},e,t&&U("span",{class:"form__label__text--required"},n))}const tr=16,ea=17,Mh="http://www.w3.org/2000/svg";function Ah(){const e=c=>$e.document.createElementNS(Mh,c),t=Re(e("svg"),{width:`${tr}`,height:`${ea}`,viewBox:`0 0 ${tr} ${ea}`,fill:"inherit"}),n=Re(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Re(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=Re(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=Re(e("clipPath"),{id:"clip0_57_156"}),a=Re(e("rect"),{width:`${tr}`,height:`${tr}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),t}function Nh({open:e,onFormSubmitted:t,...n}){const r=n.options,s=Hn(()=>({__html:Ah().outerHTML}),[]),[i,o]=wt(null),a=Zt(()=>{i&&(clearTimeout(i),o(null)),t()},[i]),c=Zt(u=>{n.onSubmitSuccess(u),o(setTimeout(()=>{t(),o(null)},Zp))},[t]);return U(Un,null,i?U("div",{class:"success__position",onClick:a},U("div",{class:"success__content"},r.successMessageText,U("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):U("dialog",{class:"dialog",onClick:r.onFormClose,open:e},U("div",{class:"dialog__position"},U("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},U(Ch,{options:r}),U(xh,{...n,onSubmitSuccess:c})))))}const Oh=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,Dh=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,Lh=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,Ph=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,Fh=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function $h(e){const t=Q.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Oh}
${Dh}
${Lh}
${Ph}
${Fh}
`,e&&t.setAttribute("nonce",e),t}function Bh(){const e=ne().getUser(),t=Be().getUser(),n=Xa().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const Uh=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,i=e.useSentryUser,o=Bh(),a=Q.createElement("div"),c=$h(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){s.removeChild(a),s.removeChild(c),Q.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),$()?.emit("openFeedbackWidget"),u=Q.body.style.overflow,Q.body.style.overflow="hidden"},close(){f(!1),Q.body.style.overflow=u}},l=t?.createInput({h:U,hooks:Th,dialog:d,options:e}),f=p=>{hh(U(Nh,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&o&&o[i.name]||"",defaultEmail:i&&o&&o[i.email]||"",onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:h=>{f(!1),e.onSubmitSuccess?.(h)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}});function Hh({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function Wh(e){const t=Q.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function zh({h:e}){return function({action:n,setAction:r}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},"Highlight"),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},"Hide")))}}function jh({hooks:e}){function t(){const[n,r]=e.useState($e.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r($e.devicePixelRatio)},i=matchMedia(`(resolution: ${$e.devicePixelRatio}dppx)`);return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:i,onError:o}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await Sn.mediaDevices.getDisplayMedia({video:{width:$e.innerWidth*a,height:$e.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=Q.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(o)},[])}}function qh(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function ot(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function gs(e,t){ot(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function ys(e,t,n){ot(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(i=>{qh(i,s,t)})})}function Gh({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const i=jh({hooks:t}),o=zh({h:e}),a=Hh({h:e}),c={__html:Wh(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),_=t.useRef(null),g=t.useRef(null),v=t.useRef(null),A=t.useRef(null),[C,x]=t.useState(1),y=t.useMemo(()=>{const b=Q.getElementById(s.id);if(!b)return"white";const R=getComputedStyle(b);return R.getPropertyValue("--button-primary-background")||R.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const b=()=>{const R=_.current;R&&ot(l.canvas,{alpha:!1},P=>{const W=Math.min(R.clientWidth/P.width,R.clientHeight/P.height);x(W)})};return b(),$e.addEventListener("resize",b),()=>{$e.removeEventListener("resize",b)}},[l]);const k=t.useCallback((b,R)=>{ot(b,{alpha:!0},(P,W)=>{W.scale(R,R),P.width=l.canvas.width,P.height=l.canvas.height})},[l]);t.useEffect(()=>{k(g.current,l.dpi),gs(g.current,l.canvas)},[l]),t.useEffect(()=>{k(v.current,l.dpi),ot(v.current,{alpha:!0},(b,R)=>{R.clearRect(0,0,b.width,b.height)}),ys(v.current,y,h)},[h,y]),t.useEffect(()=>{k(n,l.dpi),gs(n,l.canvas),ot(Q.createElement("canvas"),{alpha:!0},(b,R)=>{R.scale(l.dpi,l.dpi),b.width=l.canvas.width,b.height=l.canvas.height,ys(b,y,h),gs(n,b)})},[h,l,y]);const w=b=>{if(!f||!A.current)return;const R=A.current.getBoundingClientRect(),P={type:f,x:b.offsetX/C,y:b.offsetY/C},W=(D,K)=>{const J=(K.clientX-R.x)/C,ge=(K.clientY-R.y)/C;return{type:D.type,x:Math.min(D.x,J),y:Math.min(D.y,ge),w:Math.abs(J-D.x),h:Math.abs(ge-D.y)}},M=D=>{ot(v.current,{alpha:!0},(K,J)=>{J.clearRect(0,0,K.width,K.height)}),ys(v.current,y,[...h,W(P,D)])},Z=D=>{const K=W(P,D);K.w*C>=1&&K.h*C>=1&&m(J=>[...J,K]),Q.removeEventListener("mousemove",M),Q.removeEventListener("mouseup",Z)};Q.addEventListener("mousemove",M),Q.addEventListener("mouseup",Z)},S=t.useCallback(b=>R=>{R.preventDefault(),R.stopPropagation(),m(P=>{const W=[...P];return W.splice(b,1),W})},[]),T={width:`${l.canvas.width*C}px`,height:`${l.canvas.height*C}px`},I=b=>{b.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:g,id:"background",style:T}),e("canvas",{ref:v,id:"foreground",style:T}),e("div",{ref:A,onMouseDown:w,style:T},h.map((b,R)=>e("div",{key:R,class:"editor__rect",style:{top:`${b.y*C}px`,left:`${b.x*C}px`,width:`${b.w*C}px`,height:`${b.h*C}px`}},e("button",{"aria-label":"Remove",onClick:S(R),onMouseDown:I,onMouseUp:I,type:"button"},e(a,null))))))),e(o,{action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,_)=>{ot(Q.createElement("canvas"),{alpha:!1},(g,v)=>{v.scale(_,_),g.width=m.videoWidth,g.height=m.videoHeight,v.drawImage(m,0,0,g.width,g.height),h({canvas:g,dpi:_})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const Vh=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=Q.createElement("canvas");return{input:Gh({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const i=await new Promise(o=>{s.toBlob(o,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),q=G;let Ks=0;function ru(){return Ks>0}function Yh(){Ks++,setTimeout(()=>{Ks--})}function sn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(gi(e))return e}catch{return e}const r=function(...s){try{const i=s.map(o=>sn(o,t));return e.apply(this,i)}catch(i){throw Yh(),yi(o=>{o.addEventProcessor(a=>(t.mechanism&&(Ns(a,void 0),Qt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),wc(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}qa(r,e),Me(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Xh=ah({getModalIntegration:()=>Uh,getScreenshotIntegration:()=>Vh});function Mi(e,t){const n=Ai(e,t),r={type:em(t),value:tm(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Kh(e,t,n,r){const i=$()?.getOptions().normalizeDepth,o=om(t),a={__serialized__:_c(t,i)};if(o)return{exception:{values:[Mi(e,o)]},extra:a};const c={exception:{values:[{type:qr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:sm(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Ai(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Ss(e,t){return{exception:{values:[Mi(e,t)]}}}function Ai(e,t){const n=t.stacktrace||t.stack||"",r=Zh(t),s=Qh(t);try{return e(n,r,s)}catch{}return[]}const Jh=/Minified React error #\d+;/i;function Zh(e){return e&&Jh.test(e.message)?1:0}function Qh(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function su(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function em(e){const t=e?.name;return!t&&su(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function tm(e){const t=e?.message;return su(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function nm(e,t,n,r){const s=n?.syntheticException||void 0,i=Ni(e,t,s,r);return Qt(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),nt(i)}function rm(e,t,n="info",r,s){const i=r?.syntheticException||void 0,o=Js(e,t,i,s);return o.level=n,r?.event_id&&(o.event_id=r.event_id),nt(o)}function Ni(e,t,n,r,s){let i;if(Ha(t)&&t.error)return Ss(e,t.error);if(Ji(t)||El(t)){const o=t;if("stack"in t)i=Ss(e,t);else{const a=o.name||(Ji(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=Js(e,c,n,r),Ns(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return pi(t)?Ss(e,t):kn(t)||qr(t)?(i=Kh(e,t,n,s),Qt(i,{synthetic:!0}),i):(i=Js(e,t,n,r),Ns(i,`${t}`),Qt(i,{synthetic:!0}),i)}function Js(e,t,n,r){const s={};if(r&&n){const i=Ai(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]}),Qt(s,{synthetic:!0})}if(hi(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function sm(e,{isUnhandledRejection:t}){const n=Ml(e),r=t?"promise rejection":"exception";return Ha(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:qr(e)?`Event \`${im(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function im(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function om(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}const am=5e3;class cm extends Tf{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},r=q.SENTRY_SDK_SOURCE||Op();Lc(n,"browser",["browser"],r),super(n);const s=this,{sendDefaultPii:i,_experiments:o}=s._options,a=o?.enableLogs;n.sendClientReports&&q.document&&q.document.addEventListener("visibilitychange",()=>{q.document.visibilityState==="hidden"&&(this._flushOutcomes(),a&&ps(s))}),a&&(s.on("flush",()=>{ps(s)}),s.on("afterCaptureLog",()=>{s._logFlushIdleTimeout&&clearTimeout(s._logFlushIdleTimeout),s._logFlushIdleTimeout=setTimeout(()=>{ps(s)},am)})),i&&(s.on("postprocessEvent",Hf),s.on("beforeSendSession",Wf))}eventFromException(t,n){return nm(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return rm(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}const xn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,um=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",pn=(e,t,n,r)=>{let s,i;return o=>{t.value>=0&&(o||r)&&(i=t.value-(s||0),(i||s===void 0)&&(s=t.value,t.delta=i,t.rating=um(t.value,n),e(t)))}},H=G,lm=()=>`v4-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Wn=(e=!0)=>{const t=H.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},zn=()=>Wn()?.activationStart||0,hn=(e,t)=>{const n=Wn();let r="navigate";return n&&(H.document?.prerendering||zn()>0?r="prerender":H.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:lm(),navigationType:r}},Bt=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},mn=e=>{const t=n=>{(n.type==="pagehide"||H.document?.visibilityState==="hidden")&&e(n)};H.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},Kr=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let bn=-1;const dm=()=>H.document.visibilityState==="hidden"&&!H.document.prerendering?0:1/0,Nr=e=>{H.document.visibilityState==="hidden"&&bn>-1&&(bn=e.type==="visibilitychange"?e.timeStamp:0,pm())},fm=()=>{addEventListener("visibilitychange",Nr,!0),addEventListener("prerenderingchange",Nr,!0)},pm=()=>{removeEventListener("visibilitychange",Nr,!0),removeEventListener("prerenderingchange",Nr,!0)},Jr=()=>(H.document&&bn<0&&(bn=dm(),fm()),{get firstHiddenTime(){return bn}}),jn=e=>{H.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},hm=[1800,3e3],mm=(e,t={})=>{jn(()=>{const n=Jr(),r=hn("FCP");let s;const o=Bt("paint",a=>{a.forEach(c=>{c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-zn(),0),r.entries.push(c),s(!0)))})});o&&(s=pn(e,r,hm,t.reportAllChanges))})},_m=[.1,.25],gm=(e,t={})=>{mm(Kr(()=>{const n=hn("CLS",0);let r,s=0,i=[];const o=c=>{c.forEach(u=>{if(!u.hadRecentInput){const d=i[0],l=i[i.length-1];s&&d&&l&&u.startTime-l.startTime<1e3&&u.startTime-d.startTime<5e3?(s+=u.value,i.push(u)):(s=u.value,i=[u])}}),s>n.value&&(n.value=s,n.entries=i,r())},a=Bt("layout-shift",o);a&&(r=pn(e,n,_m,t.reportAllChanges),mn(()=>{o(a.takeRecords()),r(!0)}),setTimeout(r,0))}))},ym=[100,300],Sm=(e,t={})=>{jn(()=>{const n=Jr(),r=hn("FID");let s;const i=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),s(!0))},o=c=>{c.forEach(i)},a=Bt("first-input",o);s=pn(e,r,ym,t.reportAllChanges),a&&mn(Kr(()=>{o(a.takeRecords()),a.disconnect()}))})};let iu=0,bs=1/0,nr=0;const bm=e=>{e.forEach(t=>{t.interactionId&&(bs=Math.min(bs,t.interactionId),nr=Math.max(nr,t.interactionId),iu=nr?(nr-bs)/7+1:0)})};let Zs;const Em=()=>Zs?iu:performance.interactionCount||0,vm=()=>{"interactionCount"in performance||Zs||(Zs=Bt("event",bm,{type:"event",buffered:!0,durationThreshold:0}))},Ye=[],Es=new Map,wm=40;let Tm=0;const km=()=>Em()-Tm,Im=()=>{const e=Math.min(Ye.length-1,Math.floor(km()/50));return Ye[e]},vs=10,Cm=[],Rm=e=>{if(Cm.forEach(r=>r(e)),!(e.interactionId||e.entryType==="first-input"))return;const t=Ye[Ye.length-1],n=Es.get(e.interactionId);if(n||Ye.length<vs||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0]?.startTime&&n.entries.push(e);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};Es.set(r.id,r),Ye.push(r)}Ye.sort((r,s)=>s.latency-r.latency),Ye.length>vs&&Ye.splice(vs).forEach(r=>Es.delete(r.id))}},ou=e=>{const t=H.requestIdleCallback||H.setTimeout;let n=-1;return e=Kr(e),H.document?.visibilityState==="hidden"?e():(n=t(e),mn(e)),n},xm=[200,500],Mm=(e,t={})=>{"PerformanceEventTiming"in H&&"interactionId"in PerformanceEventTiming.prototype&&jn(()=>{vm();const n=hn("INP");let r;const s=o=>{ou(()=>{o.forEach(Rm);const a=Im();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())})},i=Bt("event",s,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:wm});r=pn(e,n,xm,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),mn(()=>{s(i.takeRecords()),r(!0)}))})},Am=[2500,4e3],ta={},Nm=(e,t={})=>{jn(()=>{const n=Jr(),r=hn("LCP");let s;const i=a=>{t.reportAllChanges||(a=a.slice(-1)),a.forEach(c=>{c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-zn(),0),r.entries=[c],s())})},o=Bt("largest-contentful-paint",i);if(o){s=pn(e,r,Am,t.reportAllChanges);const a=Kr(()=>{ta[r.id]||(i(o.takeRecords()),o.disconnect(),ta[r.id]=!0,s(!0))});["keydown","click"].forEach(c=>{H.document&&addEventListener(c,()=>ou(a),{once:!0,capture:!0})}),mn(a)}})},Om=[800,1800],Qs=e=>{H.document?.prerendering?jn(()=>Qs(e)):H.document?.readyState!=="complete"?addEventListener("load",()=>Qs(e),!0):setTimeout(e,0)},Dm=(e,t={})=>{const n=hn("TTFB"),r=pn(e,n,Om,t.reportAllChanges);Qs(()=>{const s=Wn();s&&(n.value=Math.max(s.responseStart-zn(),0),n.entries=[s],r(!0))})},En={},Or={};let au,cu,uu,lu,du;function Oi(e,t=!1){return qn("cls",e,Pm,au,t)}function fu(e,t=!1){return qn("lcp",e,$m,uu,t)}function pu(e){return qn("fid",e,Fm,cu)}function Lm(e){return qn("ttfb",e,Bm,lu)}function hu(e){return qn("inp",e,Um,du)}function on(e,t){return mu(e,t),Or[e]||(Hm(e),Or[e]=!0),_u(e,t)}function _n(e,t){const n=En[e];if(n?.length)for(const r of n)try{r(t)}catch(s){xn&&E.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${et(r)}
Error:`,s)}}function Pm(){return gm(e=>{_n("cls",{metric:e}),au=e},{reportAllChanges:!0})}function Fm(){return Sm(e=>{_n("fid",{metric:e}),cu=e})}function $m(){return Nm(e=>{_n("lcp",{metric:e}),uu=e},{reportAllChanges:!0})}function Bm(){return Dm(e=>{_n("ttfb",{metric:e}),lu=e})}function Um(){return Mm(e=>{_n("inp",{metric:e}),du=e})}function qn(e,t,n,r,s=!1){mu(e,t);let i;return Or[e]||(i=n(),Or[e]=!0),r&&t({metric:r}),_u(e,t,s?i:void 0)}function Hm(e){const t={};e==="event"&&(t.durationThreshold=0),Bt(e,n=>{_n(e,{entries:n})},t)}function mu(e,t){En[e]=En[e]||[],En[e].push(t)}function _u(e,t,n){return()=>{n&&n();const r=En[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function Wm(e){return"duration"in e}function ws(e){return typeof e=="number"&&isFinite(e)}function st(e,t,n,{...r}){const s=Y(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Sc(e,()=>{const i=Bn({startTime:t,...r});return i&&i.end(n),i})}function gu(e){const t=$();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:i}=e,{release:o,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=ne(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:o,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":H.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return Bn({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function Di(){return H.addEventListener&&H.performance}function ue(e){return e/1e3}function yu(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function zm(){let e=0,t,n;if(!qm())return;let r=!1;function s(){r||(r=!0,n&&jm(e,t,n),i())}const i=Oi(({metric:o})=>{const a=o.entries[o.entries.length-1];a&&(e=o.value,t=a)},!0);mn(()=>{s()}),setTimeout(()=>{const o=$();if(!o)return;const a=o.on("startNavigationSpan",()=>{s(),a?.()}),c=we();if(c){const u=_e(c);Y(u).op==="pageload"&&(n=u.spanContext().spanId)}},0)}function jm(e,t,n){xn&&E.log(`Sending CLS span (${e})`);const r=ue((Ae()||0)+(t?.startTime||0)),s=ne().getScopeData().transactionName,i=t?Ze(t.sources[0]?.node):"Layout shift",o={[pe]:"auto.http.browser.cls",[Mt]:"ui.webvital.cls",[Fn]:t?.duration||0,"sentry.pageload.span_id":n},a=gu({name:i,transaction:s,attributes:o,startTime:r});a&&(a.addEvent("cls",{[Vr]:"",[Yr]:e}),a.end(r))}function qm(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}const Gm=2147483647;let na=0,me={},Te,Dr;function Vm({recordClsStandaloneSpans:e}){const t=Di();if(t&&Ae()){t.mark&&H.performance.mark("sentry-tracing-init");const n=Qm(),r=Zm(),s=e_(),i=e?zm():Jm();return()=>{n(),r(),s(),i?.()}}return()=>{}}function Ym(){on("longtask",({entries:e})=>{const t=we();if(!t)return;const{op:n,start_timestamp:r}=Y(t);for(const s of e){const i=ue(Ae()+s.startTime),o=ue(s.duration);n==="navigation"&&r&&i<r||st(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[pe]:"auto.ui.browser.metrics"}})}})}function Xm(){new PerformanceObserver(t=>{const n=we();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=ue(Ae()+r.startTime),{start_timestamp:i,op:o}=Y(n);if(o==="navigation"&&i&&s<i)continue;const a=ue(r.duration),c={[pe]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),st(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Km(){on("event",({entries:e})=>{const t=we();if(t){for(const n of e)if(n.name==="click"){const r=ue(Ae()+n.startTime),s=ue(n.duration),i={name:Ze(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[pe]:"auto.ui.browser.metrics"}},o=ja(n.target);o&&(i.attributes["ui.component_name"]=o),st(t,r,r+s,i)}}})}function Jm(){return Oi(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(me.cls={value:e.value,unit:""},Dr=t)},!0)}function Zm(){return fu(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(me.lcp={value:e.value,unit:"millisecond"},Te=t)},!0)}function Qm(){return pu(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ue(Ae()),r=ue(t.startTime);me.fid={value:e.value,unit:"millisecond"},me["mark.fid"]={value:n+r,unit:"second"}})}function e_(){return Lm(({metric:e})=>{e.entries[e.entries.length-1]&&(me.ttfb={value:e.value,unit:"millisecond"})})}function t_(e,t){const n=Di(),r=Ae();if(!n?.getEntries||!r)return;const s=ue(r),i=n.getEntries(),{op:o,start_timestamp:a}=Y(e);if(i.slice(na).forEach(c=>{const u=ue(c.startTime),d=ue(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{r_(e,c,s);break}case"mark":case"paint":case"measure":{n_(e,c,u,d,s);const l=Jr(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(me.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(me.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{o_(e,c,c.name,u,d,s);break}}}),na=Math.max(i.length-1,0),a_(e),o==="pageload"){u_(me);const c=me["mark.fid"];c&&me.fid&&(st(e,c.value,c.value+ue(me.fid.value),{name:"first input delay",op:"ui.action",attributes:{[pe]:"auto.ui.browser.metrics"}}),delete me["mark.fid"]),(!("fcp"in me)||!t.recordClsOnPageloadSpan)&&delete me.cls,Object.entries(me).forEach(([u,d])=>{$d(u,d.value,d.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",zn()),c_(e)}Te=void 0,Dr=void 0,me={}}function n_(e,t,n,r,s){const i=Wn(!1),o=ue(i?i.requestStart:0),a=s+Math.max(n,o),c=s+n,u=c+r,d={[pe]:"auto.resource.browser.metrics"};a!==c&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=a),a<=u&&st(e,a,u,{name:t.name,op:t.entryType,attributes:d})}function r_(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{rr(e,t,r,n)}),rr(e,t,"secureConnection",n,"TLS/SSL"),rr(e,t,"fetch",n,"cache"),rr(e,t,"domainLookup",n,"DNS"),i_(e,t,n)}function rr(e,t,n,r,s=n){const i=s_(n),o=t[i],a=t[`${n}Start`];!a||!o||st(e,r+ue(a),r+ue(o),{op:`browser.${s}`,name:t.name,attributes:{[pe]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function s_(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function i_(e,t,n){const r=n+ue(t.requestStart),s=n+ue(t.responseEnd),i=n+ue(t.responseStart);t.responseEnd&&(st(e,r,s,{op:"browser.request",name:t.name,attributes:{[pe]:"auto.ui.browser.metrics"}}),st(e,i,s,{op:"browser.response",name:t.name,attributes:{[pe]:"auto.ui.browser.metrics"}}))}function o_(e,t,n,r,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o=xt(n),a={[pe]:"auto.resource.browser.metrics"};Ts(a,t,"transferSize","http.response_transfer_size"),Ts(a,t,"encodedBodySize","http.response_content_length"),Ts(a,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;c!=null&&(a["http.response_delivery_type"]=c);const u=t.renderBlockingStatus;u&&(a["resource.render_blocking_status"]=u),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(H.location.origin);const{name:d,version:l}=yu(t.nextHopProtocol);a["network.protocol.name"]=d,a["network.protocol.version"]=l;const f=i+r,p=f+s;st(e,f,p,{name:n.replace(H.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}function a_(e){const t=H.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),ws(n.rtt)&&(me["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ws(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),ws(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function c_(e){Te&&(Te.element&&e.setAttribute("lcp.element",Ze(Te.element)),Te.id&&e.setAttribute("lcp.id",Te.id),Te.url&&e.setAttribute("lcp.url",Te.url.trim().slice(0,200)),Te.loadTime!=null&&e.setAttribute("lcp.loadTime",Te.loadTime),Te.renderTime!=null&&e.setAttribute("lcp.renderTime",Te.renderTime),e.setAttribute("lcp.size",Te.size)),Dr?.sources&&Dr.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,Ze(t.node)))}function Ts(e,t,n,r){const s=t[n];s!=null&&s<Gm&&(e[r]=s)}function u_(e){const t=Wn(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const l_=1e3;let ra,ei,ti;function Su(e){const t="dom";yt(t,e),St(t,d_)}function d_(){if(!H.document)return;const e=Ne.bind(null,"dom"),t=sa(e,!0);H.document.addEventListener("click",t,!1),H.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=H[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(ke(s,"addEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[o]=u[o]||{refCount:0};if(!d.handler){const l=sa(e);d.handler=l,i.call(this,o,l,c)}d.refCount++}catch{}return i.call(this,o,a,c)}}),ke(s,"removeEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[o];d&&(d.refCount--,d.refCount<=0&&(i.call(this,o,d.handler,c),d.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,c)}}))})}function f_(e){if(e.type!==ei)return!1;try{if(!e.target||e.target._sentryId!==ti)return!1}catch{}return!0}function p_(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function sa(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=h_(n);if(p_(n.type,r))return;Me(n,"_sentryCaptured",!0),r&&!r._sentryId&&Me(r,"_sentryId",xe());const s=n.type==="keypress"?"input":n.type;f_(n)||(e({event:n,name:s,global:t}),ei=n.type,ti=r?r._sentryId:void 0),clearTimeout(ra),ra=H.setTimeout(()=>{ti=void 0,ei=void 0},l_)}}function h_(e){try{return e.target}catch{return null}}let sr;function Zr(e){const t="history";yt(t,e),St(t,m_)}function m_(){if(H.addEventListener("popstate",()=>{const t=H.location.href,n=sr;if(sr=t,n===t)return;Ne("history",{from:n,to:t})}),!kp())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=sr,i=String(r);if(sr=i,s===i)return t.apply(this,n);Ne("history",{from:s,to:i})}return t.apply(this,n)}}ke(H.history,"pushState",e),ke(H.history,"replaceState",e)}const vr={};function bu(e){const t=vr[e];if(t)return t;let n=H[e];if(zs(n))return vr[e]=n.bind(H);const r=H.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(s)}catch(s){xn&&E.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(vr[e]=n.bind(H))}function ia(e){vr[e]=void 0}function an(...e){return bu("setTimeout")(...e)}const Tt="__sentry_xhr_v3__";function Eu(e){const t="xhr";yt(t,e),St(t,__)}function __(){if(!H.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,i=ve()*1e3,o=Xe(r[0])?r[0].toUpperCase():void 0,a=g_(r[1]);if(!o||!a)return t.apply(n,r);n[Tt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[Tt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:ve()*1e3,startTimestamp:i,xhr:n,virtualError:s};Ne("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[Tt];return h&&Xe(f)&&Xe(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[Tt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:ve()*1e3,xhr:n};return Ne("xhr",i),t.apply(n,r)}})}function g_(e){if(Xe(e))return e;try{return e.toString()}catch{}}function vu(e){return new URLSearchParams(e).toString()}function wu(e,t=E){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[vu(e)];if(!e)return[void 0]}catch(n){return xn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return xn&&t.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Tu(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}const ks=[],wr=new Map;function y_(){if(Di()&&Ae()){const t=S_();return()=>{t()}}return()=>{}}const oa={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function S_(){return hu(({metric:e})=>{if(e.value==null)return;const t=e.entries.find(h=>h.duration===e.value&&oa[h.name]);if(!t)return;const{interactionId:n}=t,r=oa[t.name],s=ue(Ae()+t.startTime),i=ue(e.value),o=we(),a=o?_e(o):void 0,u=(n!=null?wr.get(n):void 0)||a,d=u?Y(u).description:ne().getScopeData().transactionName,l=Ze(t.target),f={[pe]:"auto.http.browser.inp",[Mt]:`ui.interaction.${r}`,[Fn]:t.duration},p=gu({name:l,transaction:d,attributes:f,startTime:s});p&&(p.addEvent("inp",{[Vr]:"millisecond",[Yr]:e.value}),p.end(s+i))})}function b_(){const e=({entries:t})=>{const n=we(),r=n&&_e(n);t.forEach(s=>{if(!Wm(s)||!r)return;const i=s.interactionId;if(i!=null&&!wr.has(i)){if(ks.length>10){const o=ks.shift();wr.delete(o)}ks.push(i),wr.set(i,r)}})};on("event",e),on("first-input",e)}function E_(e,t=bu("fetch")){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return ia("fetch"),xr("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return ia("fetch"),n-=o,r--,xr(c)}}return Ff(e,s)}const v_=30,w_=50;function ni(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?Nt:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const T_=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,k_=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,I_=/\((\S*)(?::(\d+))(?::(\d+))\)/,C_=e=>{const t=T_.exec(e);if(t){const[,r,s,i]=t;return ni(r,Nt,+s,+i)}const n=k_.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=I_.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[s,i]=ku(n[1]||Nt,n[2]);return ni(i,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},R_=[v_,C_],x_=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,M_=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,A_=e=>{const t=x_.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=M_.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||Nt;return[s,r]=ku(s,r),ni(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},N_=[w_,A_],O_=[R_,N_],D_=uc(...O_),ku=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Nt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Oe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ir=1024,L_="Breadcrumbs",P_=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:L_,setup(n){t.console&&op(U_(n)),t.dom&&Su(B_(n,t.dom)),t.xhr&&Eu(H_(n)),t.fetch&&zc(W_(n)),t.history&&Zr(z_(n)),t.sentry&&n.on("beforeSendEvent",$_(n))}}},F_=P_;function $_(e){return function(n){$()===e&&mt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Et(n)},{event:n})}}function B_(e,t){return function(r){if($()!==e)return;let s,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>ir&&(Oe&&E.warn(`\`dom.maxStringLength\` cannot exceed ${ir}, but a value of ${a} was configured. Sentry will use ${ir} instead.`),a=ir),typeof o=="string"&&(o=[o]);try{const u=r.event,d=j_(u)?u.target:u;s=Ze(d,{keyAttrs:o,maxStringLength:a}),i=ja(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),mt(c,{event:r.event,name:r.name,global:r.global})}}function U_(e){return function(n){if($()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Fc(n.level),message:Zi(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Zi(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;mt(r,{input:n.args,level:n.level})}}function H_(e){return function(n){if($()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[Tt];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,d={method:o,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Hc(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),mt(f,l)}}function W_(e){return function(n){if($()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),mt(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Hc(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),mt(c,a)}}}function z_(e){return function(n){if($()!==e)return;let r=n.from,s=n.to;const i=xt(q.location.href);let o=r?xt(r):void 0;const a=xt(s);o?.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),mt({category:"navigation",data:{from:r,to:s}})}}function j_(e){return!!e&&!!e.target}const q_=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],G_="BrowserApiErrors",V_=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:G_,setupOnce(){t.setTimeout&&ke(q,"setTimeout",aa),t.setInterval&&ke(q,"setInterval",aa),t.requestAnimationFrame&&ke(q,"requestAnimationFrame",X_),t.XMLHttpRequest&&"XMLHttpRequest"in q&&ke(XMLHttpRequest.prototype,"send",K_);const n=t.eventTarget;n&&(Array.isArray(n)?n:q_).forEach(J_)}}},Y_=V_;function aa(e){return function(...t){const n=t[0];return t[0]=sn(n,{mechanism:{data:{function:et(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function X_(e){return function(t){return e.apply(this,[sn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:et(e)},handled:!1,type:"instrument"}})])}}function K_(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&ke(n,s,function(i){const o={mechanism:{data:{function:s,handler:et(i)},handled:!1,type:"instrument"}},a=gi(i);return a&&(o.mechanism.data.handler=et(a)),sn(i,o)})}),e.apply(this,t)}}function J_(e){const n=q[e]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(ke(n,"addEventListener",function(r){return function(s,i,o){try{Z_(i)&&(i.handleEvent=sn(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:et(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,sn(i,{mechanism:{data:{function:"addEventListener",handler:et(i),target:e},handled:!1,type:"instrument"}}),o])}}),ke(n,"removeEventListener",function(r){return function(s,i,o){try{const a=i.__sentry_wrapped__;a&&r.call(this,s,a,o)}catch{}return r.call(this,s,i,o)}}))}function Z_(e){return typeof e.handleEvent=="function"}const Iu=()=>({name:"BrowserSession",setupOnce(){if(typeof q.document>"u"){Oe&&E.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}vo({ignoreDuration:!0}),wo(),Zr(({from:e,to:t})=>{e!==void 0&&e!==t&&(vo({ignoreDuration:!0}),wo())})}}),Q_="GlobalHandlers",eg=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Q_,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(ng(n),ca("onerror")),t.onunhandledrejection&&(rg(n),ca("onunhandledrejection"))}}},tg=eg;function ng(e){lc(t=>{const{stackParser:n,attachStacktrace:r}=Cu();if($()!==e||ru())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=og(Ni(n,c||s,void 0,r,!1),i,o,a);u.level="error",Tc(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function rg(e){dc(t=>{const{stackParser:n,attachStacktrace:r}=Cu();if($()!==e||ru())return;const s=sg(t),i=mi(s)?ig(s):Ni(n,s,void 0,r,!0);i.level="error",Tc(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function sg(e){if(mi(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function ig(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function og(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=Xe(t)&&t.length>0?t:Lt();return c.length===0&&c.push({colno:u,filename:l,function:Nt,in_app:!0,lineno:d}),e}function ca(e){Oe&&E.log(`Global Handler attached: ${e}`)}function Cu(){return $()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ag=()=>({name:"HttpContext",preprocessEvent(e){if(!q.navigator&&!q.location&&!q.document)return;const t=e.request?.url||Lt(),{referrer:n}=q.document||{},{userAgent:r}=q.navigator||{},s={...e.request?.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:s};e.request=i}}),cg="cause",ug=5,lg="LinkedErrors",dg=(e={})=>{const t=e.limit||ug,n=e.key||cg;return{name:lg,preprocessEvent(r,s,i){const o=i.getOptions();ip(Mi,o.stackParser,n,t,r,s)}}},fg=dg;function ri(e){return[Jf(),Vf(),Y_(),F_(),tg(),fg(),lp(),ag(),Iu()]}function pg(e={}){return{...{defaultIntegrations:ri(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:q.SENTRY_RELEASE?.id,sendClientReports:!0},...hg(e)}}function hg(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const r=n;e[r]!==void 0&&(t[r]=e[r])}return t}function mg(){const e=typeof q.window<"u"&&q;if(!e)return!1;const t=e.chrome?"chrome":"browser",r=e[t]?.runtime?.id,s=Lt()||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!r&&q===q.top&&i.some(c=>s.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!o&&!a}function _g(e={}){const t=pg(e);if(!t.skipBrowserExtensionCheck&&mg()){Oe&&gt(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Oe&&!Wc()&&E.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:ld(t.stackParser||D_),integrations:Sf(t),transport:t.transport||E_};return Mf(cm,n)}const se=G,Li="sentryReplaySession",gg="replay_event",Pi="Unable to send Replay",yg=3e5,Sg=9e5,bg=5e3,Eg=5500,vg=6e4,wg=5e3,Tg=3,ua=15e4,or=5e3,kg=3e3,Ig=300,Fi=2e7,Cg=4999,Rg=15e3,la=36e5;var xg=Object.defineProperty,Mg=(e,t,n)=>t in e?xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,da=(e,t,n)=>Mg(e,typeof t!="symbol"?t+"":t,n),fe=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(fe||{});function Ag(e){return e.nodeType===e.ELEMENT_NODE}function vn(e){return e?.host?.shadowRoot===e}function wn(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Ng(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Og(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Lr(e){try{const t=e.rules||e.cssRules;return t?Ng(Array.from(t,Ru).join("")):null}catch{return null}}function Dg(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],i=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function Ru(e){let t;if(Pg(e))try{t=Lr(e.styleSheet)||Og(e)}catch{}else if(Fg(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=Dg(e)),r&&(n=Lg(n)),r||s)return n}return t||e.cssText}function Lg(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Pg(e){return"styleSheet"in e}function Fg(e){return"selectorText"in e}class xu{constructor(){da(this,"idNodeMap",new Map),da(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function $g(){return new xu}function Qr({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Mn({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function cn(e){return e.toLowerCase()}function si(e){return e.toUpperCase()}const fa="__rrweb_original__";function Bg(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=fa in i?i[fa]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function $i(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?cn(t):null}function Pr(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Mu(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const pa={};function Au(e){const t=pa[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return pa[e]=r.bind(window)}function ii(...e){return Au("setTimeout")(...e)}function Nu(...e){return Au("clearTimeout")(...e)}function Ou(e){try{return e.contentDocument}catch{}}let Ug=1;const Hg=new RegExp("[^a-z0-9-_:]"),An=-2;function Bi(){return Ug++}function Wg(e){if(e instanceof HTMLFormElement)return"form";const t=cn(e.tagName);return Hg.test(t)?"div":t}function zg(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let qt,ha;const jg=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,qg=/^(?:[a-z+]+:)?\/\//i,Gg=/^www\..*/i,Vg=/^(data:)([^,]*),(.*)/i;function Fr(e,t){return(e||"").replace(jg,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(qg.test(c)||Gg.test(c))return`url(${u}${c}${u})`;if(Vg.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${zg(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const Yg=/^[^ \t\n\r\u000c]+/,Xg=/^[, \t\n\r\u000c]+/;function Kg(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(Xg),!(n>=t.length);){let i=r(Yg);if(i.slice(-1)===",")i=Yt(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Yt(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}const ma=new WeakMap;function Yt(e,t){return!t||t.trim()===""?t:es(e,t)}function Jg(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function es(e,t){let n=ma.get(e);if(n||(n=e.createElement("a"),ma.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Du(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Yt(e,r):n==="srcset"?Kg(e,r):n==="style"?Fr(r,es(e)):t==="object"&&n==="data"?Yt(e,r):typeof i=="function"?i(n,r,s):r)}function Lu(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Pu(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function Zg(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function kt(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:kt(e.parentNode,t,n,r+1)}function Xt(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Zg(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function un(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=kt(o,Xt(r,s)),c<0)return!0;a=kt(o,Xt(t,n),c>=0?c:1/0)}else{if(a=kt(o,Xt(t,n)),a<0)return!1;c=kt(o,Xt(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function Qg(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=ii(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{Nu(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return ii(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function ey(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=ii(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Nu(i),r=!0,t()})}function ty(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:_,dataURLOptions:g={},inlineImages:v,recordCanvas:A,keepIframeSrcFn:C,newlyAddedElement:x=!1}=t,y=ny(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:fe.Document,childNodes:[],compatMode:e.compatMode}:{type:fe.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:fe.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:y};case e.ELEMENT_NODE:return sy(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:_,dataURLOptions:g,inlineImages:v,recordCanvas:A,keepIframeSrcFn:C,newlyAddedElement:x,rootId:y,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return ry(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:_,rootId:y});case e.CDATA_SECTION_NODE:return{type:fe.CDATA,textContent:"",rootId:y};case e.COMMENT_NODE:return{type:fe.Comment,textContent:e.textContent||"",rootId:y};default:return!1}}function ny(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function ry(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=Lr(e.parentNode.sheet))}catch(g){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${g}`,e)}f=Fr(f,es(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const _=un(e,r,i,s,o,n);if(!p&&!h&&!m&&f&&_&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||_)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const g=Qr({type:null,tagName:l,maskInputOptions:c});f=Mn({isMasked:un(e,r,i,s,o,g),element:e,value:f,maskInputFn:u})}return{type:fe.Text,textContent:f||"",isStyle:p,rootId:d}}function sy(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:_,unmaskTextClass:g,maskTextSelector:v,unmaskTextSelector:A}=t,C=Pu(e,r,s,i),x=Wg(e);let y={};const k=e.attributes.length;for(let S=0;S<k;S++){const T=e.attributes[S];T.name&&!Lu(x,T.name,T.value)&&(y[T.name]=Du(n,x,cn(T.name),T.value,e,c))}if(x==="link"&&o){const S=Array.from(n.styleSheets).find(I=>I.href===e.href);let T=null;S&&(T=Lr(S)),T&&(y.rel=null,y.href=null,y.crossorigin=null,y._cssText=Fr(T,S.href))}if(x==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const S=Lr(e.sheet);S&&(y._cssText=Fr(S,es(n)))}if(x==="input"||x==="textarea"||x==="select"||x==="option"){const S=e,T=$i(S),I=Pr(S,si(x),T),b=S.checked;if(T!=="submit"&&T!=="button"&&I){const R=un(S,_,v,g,A,Qr({type:T,tagName:si(x),maskInputOptions:a}));y.value=Mn({isMasked:R,element:S,value:I,maskInputFn:u})}b&&(y.checked=b)}if(x==="option"&&(e.selected&&!a.select?y.selected=!0:delete y.selected),x==="canvas"&&f){if(e.__context==="2d")Bg(e)||(y.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const S=e.toDataURL(d.type,d.quality),T=n.createElement("canvas");T.width=e.width,T.height=e.height;const I=T.toDataURL(d.type,d.quality);S!==I&&(y.rr_dataURL=S)}}if(x==="img"&&l){qt||(qt=n.createElement("canvas"),ha=qt.getContext("2d"));const S=e,T=S.currentSrc||S.getAttribute("src")||"<unknown-src>",I=S.crossOrigin,b=()=>{S.removeEventListener("load",b);try{qt.width=S.naturalWidth,qt.height=S.naturalHeight,ha.drawImage(S,0,0),y.rr_dataURL=qt.toDataURL(d.type,d.quality)}catch(R){if(S.crossOrigin!=="anonymous"){S.crossOrigin="anonymous",S.complete&&S.naturalWidth!==0?b():S.addEventListener("load",b);return}else console.warn(`Cannot inline img src=${T}! Error: ${R}`)}S.crossOrigin==="anonymous"&&(I?y.crossOrigin=I:S.removeAttribute("crossorigin"))};S.complete&&S.naturalWidth!==0?b():S.addEventListener("load",b)}if((x==="audio"||x==="video")&&(y.rr_mediaState=e.paused?"paused":"played",y.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(y.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(y.rr_scrollTop=e.scrollTop)),C){const{width:S,height:T}=e.getBoundingClientRect();y={class:y.class,rr_width:`${S}px`,rr_height:`${T}px`}}x==="iframe"&&!p(y.src)&&(!C&&!Ou(e)&&(y.rr_src=y.src),delete y.src);let w;try{customElements.get(x)&&(w=!0)}catch{}return{type:fe.Element,tagName:x,attributes:y,childNodes:[],isSVG:Jg(e)||void 0,needBlock:C,rootId:m,isCustom:w}}function re(e){return e==null?"":e.toLowerCase()}function iy(e,t){if(t.comment&&e.type===fe.Comment)return!0;if(e.type===fe.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Mu(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(re(e.attributes.name).match(/^msapplication-tile(image|color)$/)||re(e.attributes.name)==="application-name"||re(e.attributes.rel)==="icon"||re(e.attributes.rel)==="apple-touch-icon"||re(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&re(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(re(e.attributes.property).match(/^(og|twitter|fb):/)||re(e.attributes.name).match(/^(og|twitter):/)||re(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(re(e.attributes.name)==="robots"||re(e.attributes.name)==="googlebot"||re(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(re(e.attributes.name)==="author"||re(e.attributes.name)==="generator"||re(e.attributes.name)==="framework"||re(e.attributes.name)==="publisher"||re(e.attributes.name)==="progid"||re(e.attributes.property).match(/^article:/)||re(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(re(e.attributes.name)==="google-site-verification"||re(e.attributes.name)==="yandex-verification"||re(e.attributes.name)==="csrf-token"||re(e.attributes.name)==="p:domain_verify"||re(e.attributes.name)==="verify-v1"||re(e.attributes.name)==="verification"||re(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Kt(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOMOptions:v,dataURLOptions:A={},inlineImages:C=!1,recordCanvas:x=!1,onSerialize:y,onIframeLoad:k,iframeLoadTimeout:w=5e3,onStylesheetLoad:S,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:I=()=>!1,newlyAddedElement:b=!1}=t;let{preserveWhiteSpace:R=!0}=t;const P=ty(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,dataURLOptions:A,inlineImages:C,recordCanvas:x,keepIframeSrcFn:I,newlyAddedElement:b});if(!P)return console.warn(e,"not serialized"),null;let W;r.hasNode(e)?W=r.getId(e):iy(P,v)||!R&&P.type===fe.Text&&!P.isStyle&&!P.textContent.replace(/^\s+|\s+$/gm,"").length?W=An:W=Bi();const M=Object.assign(P,{id:W});if(r.add(e,M),W===An)return null;y&&y(e);let Z=!f;if(M.type===fe.Element){Z=Z&&!M.needBlock,delete M.needBlock;const D=e.shadowRoot;D&&wn(D)&&(M.isShadowHost=!0)}if((M.type===fe.Document||M.type===fe.Element)&&Z){v.headWhitespace&&M.type===fe.Element&&M.tagName==="head"&&(R=!1);const D={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOMOptions:v,dataURLOptions:A,inlineImages:C,recordCanvas:x,preserveWhiteSpace:R,onSerialize:y,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:S,stylesheetLoadTimeout:T,keepIframeSrcFn:I};for(const K of Array.from(e.childNodes)){const J=Kt(K,D);J&&M.childNodes.push(J)}if(Ag(e)&&e.shadowRoot)for(const K of Array.from(e.shadowRoot.childNodes)){const J=Kt(K,D);J&&(wn(e.shadowRoot)&&(J.isShadow=!0),M.childNodes.push(J))}}return e.parentNode&&vn(e.parentNode)&&wn(e.parentNode)&&(M.isShadow=!0),M.type===fe.Element&&M.tagName==="iframe"&&!Pu(e,s,i,o)&&Qg(e,()=>{const D=Ou(e);if(D&&k){const K=Kt(D,{doc:D,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOMOptions:v,dataURLOptions:A,inlineImages:C,recordCanvas:x,preserveWhiteSpace:R,onSerialize:y,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:S,stylesheetLoadTimeout:T,keepIframeSrcFn:I});K&&k(e,K)}},w),M.type===fe.Element&&M.tagName==="link"&&typeof M.attributes.rel=="string"&&(M.attributes.rel==="stylesheet"||M.attributes.rel==="preload"&&typeof M.attributes.href=="string"&&Mu(M.attributes.href)==="css")&&ey(e,()=>{if(S){const D=Kt(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOMOptions:v,dataURLOptions:A,inlineImages:C,recordCanvas:x,preserveWhiteSpace:R,onSerialize:y,onIframeLoad:k,iframeLoadTimeout:w,onStylesheetLoad:S,stylesheetLoadTimeout:T,keepIframeSrcFn:I});D&&S(e,D)}},T),M}function oy(e,t){const{mirror:n=new xu,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOM:v=!1,dataURLOptions:A,preserveWhiteSpace:C,onSerialize:x,onIframeLoad:y,iframeLoadTimeout:k,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:T=()=>!1}=t||{};return Kt(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:g,slimDOMOptions:v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:v==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:v===!1?{}:v,dataURLOptions:A,inlineImages:f,recordCanvas:p,preserveWhiteSpace:C,onSerialize:x,onIframeLoad:y,iframeLoadTimeout:k,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:T,newlyAddedElement:!1})}function Ee(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Gt=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let _a={map:{},getId(){return console.error(Gt),-1},getNode(){return console.error(Gt),null},removeNodeFromMap(){console.error(Gt)},has(){return console.error(Gt),!1},reset(){console.error(Gt)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_a=new Proxy(_a,{get(e,t,n){return t==="map"&&console.error(Gt),Reflect.get(e,t,n)}}));function Nn(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(py(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=ts(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Fu(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){ts(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Fu(e,t,i||{},!0)}function Ui(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let $r=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||($r=()=>new Date().getTime());function $u(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Bu(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Uu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Hu(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ce(e,t,n,r,s){if(!e)return!1;const i=Hu(e);if(!i)return!1;const o=Xt(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=kt(i,o);let c=-1;return a<0?!1:(r&&(c=kt(i,Xt(null,r))),a>-1&&c<0?!0:a<c)}function ay(e,t){return t.getId(e)!==-1}function Is(e,t){return t.getId(e)===An}function Wu(e,t){if(vn(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Wu(e.parentNode,t):!0:!0}function oi(e){return!!e.changedTouches}function cy(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function zu(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function ju(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ai(e){return!!e?.shadowRoot}class uy{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function qu(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function ly(e){let t=e,n;for(;n=qu(t);)t=n;return t}function dy(e){const t=e.ownerDocument;if(!t)return!1;const n=ly(e);return t.contains(n)}function Gu(e){const t=e.ownerDocument;return t?t.contains(e)||dy(e):!1}const ga={};function Hi(e){const t=ga[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return ga[e]=r.bind(window)}function fy(...e){return Hi("requestAnimationFrame")(...e)}function ts(...e){return Hi("setTimeout")(...e)}function py(...e){return Hi("clearTimeout")(...e)}var B=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(B||{}),L=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(L||{}),be=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(be||{}),Ge=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ge||{}),Vt=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Vt||{});function Wi(e){try{return e.contentDocument}catch{}}function hy(e){try{return e.contentWindow}catch{}}function ya(e){return"__ln"in e}class my{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&ya(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&ya(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Sa=(e,t)=>`${e}@${t}`;class _y{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new my,s=c=>{let u=c,d=An;for(;d===An;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!Gu(c))return;const u=vn(c.parentNode)?this.mirror.getId(qu(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=Kt(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{zu(f,this.mirror)&&!Ce(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),ju(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ai(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ce(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)ba(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Ea(this.droppedSet,c)&&!ba(this.removes,c,this.mirror)||Ea(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),d=s(o.value);u!==-1&&d!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Is(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ce(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:un(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Hu(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const o=$i(n),a=n.tagName;s=Pr(n,a,o);const c=Qr({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),u=un(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Mn({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(Ce(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Wi(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Lu(n.tagName,r)&&(i.attributes[r]=Du(this.doc,cn(n.tagName),cn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ce(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=vn(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ce(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Is(n,this.mirror)||!ay(n,this.mirror)||(this.addedSet.has(n)?(ci(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Wu(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Sa(r,s)]?ci(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:vn(t.target)&&wn(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Is(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Sa(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ce(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),ai(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ci(e,t){e.delete(t),t.childNodes.forEach(n=>ci(e,n))}function ba(e,t,n){return e.length===0?!1:gy(e,t,n)}function gy(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(i=>i.id===s))return!0;r=r.parentNode}return!1}function Ea(e,t){return e.size===0?!1:Vu(e,t)}function Vu(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Vu(e,n):!1}let Tn;function yy(e){Tn=e}function Sy(){Tn=void 0}const j=e=>Tn?(...n)=>{try{return e(...n)}catch(r){if(Tn&&Tn(r)===!0)return()=>{};throw r}}:e,Jt=[];function Gn(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Yu(e,t){const n=new _y;Jt.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const i=new r(j(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function by({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Nn(j(l=>{const f=Date.now()-a;e(o.map(p=>(p.timeOffset-=f,p)),l),o=[],a=null}),i),u=j(Nn(j(l=>{const f=Gn(l),{clientX:p,clientY:h}=oi(l)?l.changedTouches[0]:l;a||(a=$r()),o.push({x:p,y:h,id:r.getId(f),timeOffset:$r()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?L.Drag:l instanceof MouseEvent?L.MouseMove:L.TouchMove)}),s,{trailing:!1})),d=[Ee("mousemove",u,n),Ee("touchmove",u,n),Ee("drag",u,n)];return j(()=>{d.forEach(l=>l())})}function Ey({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=Gn(f);if(Ce(p,r,s,i,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=Ge.Mouse;break;case"touch":h=Ge.Touch;break;case"pen":h=Ge.Pen;break}h===Ge.Touch?be[l]===be.MouseDown?m="TouchStart":be[l]===be.MouseUp&&(m="TouchEnd"):Ge.Pen}else oi(f)&&(h=Ge.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===Ge.Touch||m.startsWith("Mouse")&&h===Ge.Mouse)&&(h=null)):be[l]===be.Click&&(h=u,u=null);const _=oi(f)?f.changedTouches[0]:f;if(!_)return;const g=n.getId(p),{clientX:v,clientY:A}=_;j(e)({type:be[m],id:g,x:v,y:A,...h!==null&&{pointerType:h}})};return Object.keys(be).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=cn(l);const p=d(l);if(window.PointerEvent)switch(be[l]){case be.MouseDown:case be.MouseUp:f=f.replace("mouse","pointer");break;case be.TouchStart:case be.TouchEnd:return}c.push(Ee(f,p,t))}),j(()=>{c.forEach(l=>l())})}function Xu({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=j(Nn(j(c=>{const u=Gn(c);if(!u||Ce(u,r,s,i,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=$u(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return Ee("scroll",a,t)}function vy({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=j(Nn(j(()=>{const i=Bu(),o=Uu();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return Ee("resize",s,t)}const wy=["INPUT","TEXTAREA","SELECT"],va=new WeakMap;function Ty({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function _(k){let w=Gn(k);const S=k.isTrusted,T=w&&si(w.tagName);if(T==="OPTION"&&(w=w.parentElement),!w||!T||wy.indexOf(T)<0||Ce(w,r,s,i,!0))return;const I=w;if(I.classList.contains(o)||a&&I.matches(a))return;const b=$i(w);let R=Pr(I,T,b),P=!1;const W=Qr({maskInputOptions:c,tagName:T,type:b}),M=un(w,f,h,p,m,W);(b==="radio"||b==="checkbox")&&(P=w.checked),R=Mn({isMasked:M,element:w,value:R,maskInputFn:u}),g(w,l?{text:R,isChecked:P,userTriggered:S}:{text:R,isChecked:P});const Z=w.name;b==="radio"&&Z&&P&&t.querySelectorAll(`input[type="radio"][name="${Z}"]`).forEach(D=>{if(D!==w){const K=Mn({isMasked:M,element:D,value:Pr(D,T,b),maskInputFn:u});g(D,l?{text:K,isChecked:!P,userTriggered:!1}:{text:K,isChecked:!P})}})}function g(k,w){const S=va.get(k);if(!S||S.text!==w.text||S.isChecked!==w.isChecked){va.set(k,w);const T=n.getId(k);j(e)({...w,id:T})}}const A=(d.input==="last"?["change"]:["input","change"]).map(k=>Ee(k,j(_),t)),C=t.defaultView;if(!C)return()=>{A.forEach(k=>k())};const x=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),y=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];return x&&x.set&&A.push(...y.map(k=>Fu(k[0],k[1],{set(){j(_)({target:this,isTrusted:!1})}},!1,C))),j(()=>{A.forEach(k=>k())})}function Br(e){const t=[];function n(r,s){if(ar("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ar("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ar("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ar("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function at(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function ky({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:j((d,l,f)=>{const[p,h]=f,{id:m,styleId:_}=at(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:j((d,l,f)=>{const[p]=f,{id:h,styleId:m}=at(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:j((d,l,f)=>{const[p]=f,{id:h,styleId:m}=at(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:j((d,l,f)=>{const[p]=f,{id:h,styleId:m}=at(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};cr("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(cr("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),cr("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),cr("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:j((f,p,h)=>{const[m,_]=h,{id:g,styleId:v}=at(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||v&&v!==-1)&&e({id:g,styleId:v,adds:[{rule:m,index:[...Br(p),_||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:j((f,p,h)=>{const[m]=h,{id:_,styleId:g}=at(p.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,removes:[{index:[...Br(p),m]}]}),f.apply(p,h)})})}),j(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Ku({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(o){const a=i.set?.call(this,o);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return a}}),j(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function Iy({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:j((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);const{id:p,styleId:h}=at(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:Br(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:j((a,c,u)=>{const[d]=u;if(n.has(d))return o.apply(c,[d]);const{id:l,styleId:f}=at(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:Br(c.parentRule)}),a.apply(c,u)})}),j(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function Cy({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=j(u=>Nn(j(d=>{const l=Gn(d);if(!l||Ce(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),i.media||500)),c=[Ee("play",a(Vt.Play),o),Ee("pause",a(Vt.Pause),o),Ee("seeked",a(Vt.Seeked),o),Ee("volumechange",a(Vt.VolumeChange),o),Ee("ratechange",a(Vt.RateChange),o)];return j(()=>{c.forEach(u=>u())})}function Ry({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){const l=new i(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const o=Ui(t.fonts,"add",function(a){return function(c){return ts(j(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),j(()=>{r.forEach(a=>a())})}function xy(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=j(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:_,endOffset:g}=p;Ce(h,r,s,i,!0)||Ce(_,r,s,i,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(_),endOffset:g})}o({ranges:d})});return c(),Ee("selectionchange",c)}function My({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Ui(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function Ay(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Yu(e,e.doc));const s=by(e),i=Ey(e),o=Xu(e),a=vy(e,{win:n}),c=Ty(e),u=Cy(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=ky(e,{win:n}),l=Ku(e,e.doc),f=Iy(e,{win:n}),e.collectFonts&&(p=Ry(e)));const h=xy(e),m=My(e),_=[];for(const g of e.plugins)_.push(g.observer(g.callback,n,g.options));return j(()=>{Jt.forEach(g=>g.reset()),r?.disconnect(),s(),i(),o(),a(),c(),u(),d(),l(),f(),p(),h(),m(),_.forEach(g=>g())})}function ar(e){return typeof window[e]<"u"}function cr(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ui{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Ny{constructor(){this.crossOriginIframeMirror=new ui(Bi),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Oy{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ui(Bi),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ui(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=Wi(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case B.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:B.IncrementalSnapshot,data:{source:L.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case B.Meta:case B.Load:case B.DomContentLoaded:return!1;case B.Plugin:return n;case B.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case B.IncrementalSnapshot:switch(n.data.source){case L.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case L.Drag:case L.TouchMove:case L.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case L.ViewportResize:return!1;case L.MediaInteraction:case L.MouseInteraction:case L.Scroll:case L.CanvasMutation:case L.Input:return this.replaceIds(n.data,t,["id"]),n;case L.StyleSheetRule:case L.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case L.Font:return n;case L.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case L.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==fe.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Dy{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Ly{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!wn(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Yu({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Xu({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),ts(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Ku({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Wi(t),r=hy(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Ui(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Gu(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var wa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Py=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ur=0;ur<wa.length;ur++)Py[wa.charCodeAt(ur)]=ur;class Ta{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Fy{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new uy,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Ru(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class $y{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,fy(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let ae,Ur;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Pe=$g();function Ke(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:_,slimDOMOptions:g,maskAttributeFn:v,maskInputFn:A,maskTextFn:C,maxCanvasSize:x=null,packFn:y,sampling:k={},dataURLOptions:w={},mousemoveWait:S,recordDOM:T=!0,recordCanvas:I=!1,recordCrossOriginIframes:b=!1,recordAfter:R=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:P=!1,collectFonts:W=!1,inlineImages:M=!1,plugins:Z,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:K=new Set([]),errorHandler:J,onMutation:ge,getCanvasManager:Ut}=e;yy(J);const Ie=b?window.parent===window:!0;let ye=!1;if(!Ie)try{window.parent.document&&(ye=!1)}catch{ye=!0}if(Ie&&!t)throw new Error("emit function is required");if(!Ie&&!ye)return()=>{};S!==void 0&&k.mousemove===void 0&&(k.mousemove=S),Pe.reset();const De=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},qe=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};cy();let Ht,Wt=0;const gn=V=>{for(const Le of Z||[])Le.eventProcessor&&(V=Le.eventProcessor(V));return y&&!ye&&(V=y(V)),V};ae=(V,Le)=>{const z=V;if(z.timestamp=$r(),Jt[0]?.isFrozen()&&z.type!==B.FullSnapshot&&!(z.type===B.IncrementalSnapshot&&z.data.source===L.Mutation)&&Jt.forEach(Se=>Se.unfreeze()),Ie)t?.(gn(z),Le);else if(ye){const Se={type:"rrweb",event:gn(z),origin:window.location.origin,isCheckout:Le};window.parent.postMessage(Se,"*")}if(z.type===B.FullSnapshot)Ht=z,Wt=0;else if(z.type===B.IncrementalSnapshot){if(z.data.source===L.Mutation&&z.data.isAttachIframe)return;Wt++;const Se=r&&Wt>=r,X=n&&Ht&&z.timestamp-Ht.timestamp>n;(Se||X)&&os(!0)}};const it=V=>{ae({type:B.IncrementalSnapshot,data:{source:L.Mutation,...V}})},ie=V=>ae({type:B.IncrementalSnapshot,data:{source:L.Scroll,...V}}),he=V=>ae({type:B.IncrementalSnapshot,data:{source:L.CanvasMutation,...V}}),Ue=V=>ae({type:B.IncrementalSnapshot,data:{source:L.AdoptedStyleSheet,...V}}),ce=new Fy({mutationCb:it,adoptedStyleSheetCb:Ue}),le=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Ny:new Oy({mirror:Pe,mutationCb:it,stylesheetManager:ce,recordCrossOriginIframes:b,wrappedEmit:ae});for(const V of Z||[])V.getMirror&&V.getMirror({nodeMirror:Pe,crossOriginIframeMirror:le.crossOriginIframeMirror,crossOriginIframeStyleMirror:le.crossOriginIframeStyleMirror});const He=new $y,bt=Uy(Ut,{mirror:Pe,win:window,mutationCb:V=>ae({type:B.IncrementalSnapshot,data:{source:L.CanvasMutation,...V}}),recordCanvas:I,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:x,sampling:k.canvas,dataURLOptions:w,errorHandler:J}),zt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Dy:new Ly({mutationCb:it,scrollCb:ie,bypassOptions:{onMutation:ge,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:De,dataURLOptions:w,maskAttributeFn:v,maskTextFn:C,maskInputFn:A,recordCanvas:I,inlineImages:M,sampling:k,slimDOMOptions:qe,iframeManager:le,stylesheetManager:ce,canvasManager:bt,keepIframeSrcFn:D,processedNodeManager:He},mirror:Pe}),os=(V=!1)=>{if(!T)return;ae({type:B.Meta,data:{href:window.location.href,width:Uu(),height:Bu()}},V),ce.reset(),zt.init(),Jt.forEach(z=>z.lock());const Le=oy(document,{mirror:Pe,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:De,maskAttributeFn:v,maskInputFn:A,maskTextFn:C,slimDOM:qe,dataURLOptions:w,recordCanvas:I,inlineImages:M,onSerialize:z=>{zu(z,Pe)&&le.addIframe(z),ju(z,Pe)&&ce.trackLinkElement(z),ai(z)&&zt.addShadowRoot(z.shadowRoot,document)},onIframeLoad:(z,Se)=>{le.attachIframe(z,Se),z.contentWindow&&bt.addWindow(z.contentWindow),zt.observeAttachShadow(z)},onStylesheetLoad:(z,Se)=>{ce.attachLinkElement(z,Se)},keepIframeSrcFn:D});if(!Le)return console.warn("Failed to snapshot the document");ae({type:B.FullSnapshot,data:{node:Le,initialOffset:$u(window)}}),Jt.forEach(z=>z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ce.adoptStyleSheets(document.adoptedStyleSheets,Pe.getId(document))};Ur=os;try{const V=[],Le=Se=>j(Ay)({onMutation:ge,mutationCb:it,mousemoveCb:(X,as)=>ae({type:B.IncrementalSnapshot,data:{source:as,positions:X}}),mouseInteractionCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.MouseInteraction,...X}}),scrollCb:ie,viewportResizeCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.ViewportResize,...X}}),inputCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.Input,...X}}),mediaInteractionCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.MediaInteraction,...X}}),styleSheetRuleCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.StyleSheetRule,...X}}),styleDeclarationCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.StyleDeclaration,...X}}),canvasMutationCb:he,fontCb:X=>ae({type:B.IncrementalSnapshot,data:{source:L.Font,...X}}),selectionCb:X=>{ae({type:B.IncrementalSnapshot,data:{source:L.Selection,...X}})},customElementCb:X=>{ae({type:B.IncrementalSnapshot,data:{source:L.CustomElement,...X}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:De,inlineStylesheet:h,sampling:k,recordDOM:T,recordCanvas:I,inlineImages:M,userTriggeredOnInput:P,collectFonts:W,doc:Se,maskAttributeFn:v,maskInputFn:A,maskTextFn:C,keepIframeSrcFn:D,blockSelector:i,unblockSelector:o,slimDOMOptions:qe,dataURLOptions:w,mirror:Pe,iframeManager:le,stylesheetManager:ce,shadowDomManager:zt,processedNodeManager:He,canvasManager:bt,ignoreCSSAttributes:K,plugins:Z?.filter(X=>X.observer)?.map(X=>({observer:X.observer,options:X.options,callback:as=>ae({type:B.Plugin,data:{plugin:X.name,payload:as}})}))||[]},{});le.addLoadListener(Se=>{try{V.push(Le(Se.contentDocument))}catch(X){console.warn(X)}});const z=()=>{os(),V.push(Le(document))};return document.readyState==="interactive"||document.readyState==="complete"?z():(V.push(Ee("DOMContentLoaded",()=>{ae({type:B.DomContentLoaded,data:{}}),R==="DOMContentLoaded"&&z()})),V.push(Ee("load",()=>{ae({type:B.Load,data:{}}),R==="load"&&z()},window))),()=>{V.forEach(Se=>Se()),He.destroy(),Ur=void 0,Sy()}}catch(V){console.warn(V)}}function By(e){if(!Ur)throw new Error("please take full snapshot after start recording");Ur(e)}Ke.mirror=Pe;Ke.takeFullSnapshot=By;function Uy(e,t){try{return e?e(t):new Ta}catch{return console.warn("Unable to initialize CanvasManager"),new Ta}}var ka;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(ka||(ka={}));const Hy=3,Wy=5;function zi(e){return e>9999999999?e:e*1e3}function Cs(e){return e>9999999999?e/1e3:e}function Vn(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:B.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Fe(t,10,1e3)}}),t.category==="console")))}const zy="button,a";function Ju(e){return e.closest(zy)||e}function Zu(e){const t=Qu(e);return!t||!(t instanceof Element)?t:Ju(t)}function Qu(e){return jy(e)?e.target:e}function jy(e){return typeof e=="object"&&!!e&&"target"in e}let ct;function qy(e){return ct||(ct=[],Gy()),ct.push(e),()=>{const t=ct?ct.indexOf(e):-1;t>-1&&ct.splice(t,1)}}function Gy(){ke(se,"open",function(e){return function(...t){if(ct)try{ct.forEach(n=>n())}catch{}return e.apply(se,t)}})}const Vy=new Set([L.Mutation,L.StyleSheetRule,L.StyleDeclaration,L.AdoptedStyleSheet,L.CanvasMutation,L.Selection,L.MediaInteraction]);function Yy(e,t,n){e.handleClick(t,n)}class Xy{constructor(t,n,r=Vn){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=qy(()=>{this._lastMutation=Ia()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Jy(n,this._ignoreSelector)||!Zy(t))return;const r={timestamp:Cs(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Cs(t)}registerScroll(t=Date.now()){this._lastScroll=Cs(t)}registerClick(t){const n=Ju(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Ia();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:se.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,d);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:se.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=an(()=>this._checkClicks(),1e3)}}const Ky=["A","BUTTON","INPUT"];function Jy(e,t){return!!(!Ky.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Zy(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Ia(){return Date.now()/1e3}function Qy(e,t){try{if(!eS(t))return;const{source:n}=t.data;if(Vy.has(n)&&e.registerMutation(t.timestamp),n===L.Scroll&&e.registerScroll(t.timestamp),tS(t)){const{type:r,id:s}=t.data,i=Ke.mirror.getNode(s);i instanceof HTMLElement&&r===be.Click&&e.registerClick(i)}}catch{}}function eS(e){return e.type===Hy}function tS(e){return e.data.source===L.MouseInteraction}function je(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var ji=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(ji||{});const nS=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function rS(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(nS.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const sS=e=>t=>{if(!e.isEnabled())return;const n=iS(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&Yy(e.clickDetector,n,Zu(t.event)),Vn(e,n)};function el(e,t){const n=Ke.mirror.getId(e),r=n&&Ke.mirror.getNode(n),s=r&&Ke.mirror.getMeta(r),i=s&&aS(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===ji.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:rS(i.attributes)}}:{}}}function iS(e){const{target:t,message:n}=oS(e);return je({category:`ui.${e.name}`,...el(t,n)})}function oS(e){const t=e.name==="click";let n,r=null;try{r=t?Zu(e.event):Qu(e.event),n=Ze(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function aS(e){return e.type===ji.Element}function cS(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=uS(t);n&&Vn(e,n)}function uS(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||lS(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=Ze(o,{maxStringLength:200})||"<unknown>",d=el(o,u);return je({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function lS(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const dS={resource:_S,paint:hS,navigation:mS};function lr(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function fS(e){return e.map(pS).filter(Boolean)}function pS(e){const t=dS[e.entryType];return t?t(e):null}function ln(e){return((Ae()||se.performance.timeOrigin)+e)/1e3}function hS(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=ln(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function mS(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:ln(p),end:ln(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function _S(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:ln(i),end:ln(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function gS(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return ns(e,"largest-contentful-paint",n)}function yS(e){return e.sources!==void 0}function SS(e){const t=[],n=[];for(const r of e.entries)if(yS(r)){const s=[];for(const i of r.sources)if(i.node){n.push(i.node);const o=Ke.mirror.getId(i.node);o&&s.push(o)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return ns(e,"cumulative-layout-shift",n,t)}function bS(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return ns(e,"first-input-delay",n)}function ES(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return ns(e,"interaction-to-next-paint",n)}function ns(e,t,n,r){const s=e.value,i=e.rating,o=ln(s);return{type:"web-vital",name:t,start:o,end:o,data:{value:s,size:s,rating:i,nodeIds:n?n.map(a=>Ke.mirror.getId(a)):void 0,attributions:r}}}function vS(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(on(s,n))}),r.push(fu(lr(gS,e)),Oi(lr(SS,e)),pu(lr(bS,e)),hu(lr(ES,e))),()=>{r.forEach(s=>s())}}const N=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,wS='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort((function(t,n){return p[n.s]-p[t.s]||t.f-n.f}));s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){G.prototype.flush.call(this)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),s=i.length;return q(i,n),j(i,s-8,r.d()),j(i,s-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function TS(){const e=new Blob([wS]);return URL.createObjectURL(e)}const Ca=["info","warn","error","log"],Tr="[Replay] ";function Rs(e,t="info"){mt({category:"console",data:{logger:"replay"},level:t,message:`${Tr}${e}`},{level:t})}function kS(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return N?(Ca.forEach(r=>{n[r]=(...s)=>{E[r](Tr,...s),t&&Rs(s.join(""),Fc(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),E.error(Tr,r),e?wc(r):t&&Rs(r,"error")},n.infoTick=(...r)=>{E.info(Tr,...r),t&&setTimeout(()=>Rs(r[0]),0)}):Ca.forEach(r=>{n[r]=()=>{}}),n}const O=kS();class qi extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Fi}.`)}}class tl{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Fi)throw new qi;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?zi(t):null}}class IS{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){N&&O.info("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){N&&O.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class CS{constructor(t){this._worker=new IS(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=zi(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Fi?Promise.reject(new qi):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{N&&O.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class RS{constructor(t){this._fallback=new tl,this._compression=new CS(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){N&&O.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const i of t)s.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(i){N&&O.exception(i,"Failed to add events when switching buffers.")}}}function xS({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=MS(t);if(n)return n}return N&&O.info("Using simple buffer"),new tl}function MS(e){try{const t=e||AS();if(!t)return;N&&O.info(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new RS(n)}catch(t){N&&O.exception(t,"Failed to create compression worker")}}function AS(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?TS():""}function Gi(){try{return"sessionStorage"in se&&!!se.sessionStorage}catch{return!1}}function NS(e){OS(),e.session=void 0}function OS(){if(Gi())try{se.sessionStorage.removeItem(Li)}catch{}}function nl(e){return e===void 0?!1:Math.random()<e}function Vi(e){if(Gi())try{se.sessionStorage.setItem(Li,JSON.stringify(e))}catch{}}function rl(e){const t=Date.now(),n=e.id||xe(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function DS(e,t){return nl(e)?"session":t?"buffer":!1}function Ra({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=DS(e,t),i=rl({sampled:s,previousSessionId:r});return n&&Vi(i),i}function LS(){if(!Gi())return null;try{const e=se.sessionStorage.getItem(Li);if(!e)return null;const t=JSON.parse(e);return N&&O.infoTick("Loading existing session"),rl(t)}catch{return null}}function li(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function sl(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return li(e.started,t,r)||li(e.lastActivity,n,r)}function il(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!sl(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function xs({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&LS();return s?il(s,{sessionIdleExpire:e,maxReplayDuration:t})?(N&&O.infoTick("Session in sessionStorage is expired, creating new one..."),Ra(r,{previousSessionId:s.id})):s:(N&&O.infoTick("Creating new session"),Ra(r,{previousSessionId:n}))}function PS(e){return e.type===B.Custom}function Yi(e,t,n){return al(e,t)?(ol(e,t,n),!0):!1}function FS(e,t,n){return al(e,t)?ol(e,t,n):Promise.resolve(null)}async function ol(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=e.getOptions(),o=$S(t,i.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(i){const o=i&&i instanceof qi,a=o?"addEventSizeExceeded":"addEvent";if(o&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a});const c=$();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function al(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=zi(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(N&&O.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function $S(e,t){try{if(typeof t=="function"&&PS(e))return t(e)}catch(n){return N&&O.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Xi(e){return!e.type}function di(e){return e.type==="transaction"}function BS(e){return e.type==="replay_event"}function xa(e){return e.type==="feedback"}function US(e){return(t,n)=>{if(!e.isEnabled()||!Xi(t)&&!di(t))return;const r=n?.statusCode;if(!(!r||r<200||r>=300)){if(di(t)){HS(e,t);return}WS(e,t)}}}function HS(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function WS(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||an(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function zS(e){return t=>{!e.isEnabled()||!Xi(t)||jS(e,t)}}function jS(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=je({category:"replay.hydrate-error",data:{url:Lt()}});Vn(e,r)}}function qS(e){const t=$();t&&t.on("beforeAddBreadcrumb",n=>GS(e,n))}function GS(e,t){if(!e.isEnabled()||!cl(t))return;const n=VS(t);n&&Vn(e,n)}function VS(e){return!cl(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?YS(e):je(e)}function YS(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return je(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>or?(n=!0,`${s.slice(0,or)}`):s;if(typeof s=="object")try{const i=Fe(s,7);return JSON.stringify(i).length>or?(n=!0,`${JSON.stringify(i,null,2).slice(0,or)}`):i}catch{}return s});return je({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function cl(e){return!!e.category}function XS(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!t.originalException?.__rrweb__}function ul(){const e=ne().getPropagationContext().dsc;e&&delete e.replay_id;const t=we();if(t){const n=tt(t);delete n.replay_id}}function KS(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:B.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function JS(e,t){return e.recordingMode!=="buffer"||t.message===Pi||!t.exception||t.type?!1:nl(e.getOptions().errorSampleRate)}function ZS(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:BS(t)?(delete t.breadcrumbs,t):!Xi(t)&&!di(t)&&!xa(t)?t:e.checkAndHandleExpiredSession()?xa(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),KS(e,t),t):XS(t,n)&&!e.getOptions()._experiments.captureExceptions?(N&&O.log("Ignoring error from rrweb internals",t),null):((JS(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(ul(),t),{id:"Replay"})}function rs(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:B.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function QS(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function eb(e){return t=>{if(!e.isEnabled())return;const n=QS(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(rs(e,[n]),!1)))}}function tb(e,t){return N&&e.getOptions()._experiments.traceInternals?!1:$f(t,$())}function ll(e,t){e.isEnabled()&&t!==null&&(tb(e,t.name)||e.addUpdate(()=>(rs(e,[t]),!0)))}function ss(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=vu(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function dl(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Hr(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function fl(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:i,statusCode:o,request:a,response:c}}}function On(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function dt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=nb(n);return r.body=s,i?.length&&(r._meta={warnings:i}),r}function fi(e,t){return Object.entries(e).reduce((n,[r,s])=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=s),n},{})}function nb(e){if(!e||typeof e!="string")return{body:e};const t=e.length>ua,n=rb(e);if(t){const r=e.slice(0,ua);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function rb(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Wr(e,t){const n=sb(e);return lt(n,t)}function sb(e,t=se.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(se.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function ib(e,t,n){try{const r=await ab(e,t,n),s=fl("resource.fetch",r);ll(n.replay,s)}catch(r){N&&O.exception(r,"Failed to capture fetch breadcrumb")}}function ob(e,t){const{input:n,response:r}=t,s=n?Tu(n):void 0,i=ss(s),o=r?dl(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function ab(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Wr(o,n.networkDetailAllowUrls)&&!Wr(o,n.networkDetailDenyUrls),f=l?cb(n,t.input,u):On(u),p=await ub(l,n,t.response,d);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:p}}function cb({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?fb(n,t):{};if(!e)return dt(s,r,void 0);const i=Tu(n),[o,a]=wu(i,O),c=dt(s,r,o);return a?Hr(c,a):c}async function ub(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return On(s);const i=r?pl(r.headers,n):{};if(!r||!t&&s!==void 0)return dt(i,s,void 0);const[o,a]=await db(r),c=lb(o,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:i});return a?Hr(c,a):c}function lb(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const i=e?.length&&n===void 0?ss(e):n;return r?t?dt(s,i,e):dt(s,i,void 0):On(i)}catch(i){return N&&O.exception(i,"Failed to serialize response body"),dt(s,n,void 0)}}async function db(e){const t=pb(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await hb(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(N&&O.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(N&&O.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function pl(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function fb(e,t){return e.length===1&&typeof e[0]!="string"?Ma(e[0],t):e.length===2?Ma(e[1],t):{}}function Ma(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?pl(n,t):Array.isArray(n)?{}:fi(n,t):{}}function pb(e){try{return e.clone()}catch(t){N&&O.exception(t,"Failed to clone response body")}}function hb(e){return new Promise((t,n)=>{const r=an(()=>n(new Error("Timeout while trying to read response body")),500);mb(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function mb(e){return await e.text()}async function _b(e,t,n){try{const r=yb(e,t,n),s=fl("resource.xhr",r);ll(n.replay,s)}catch(r){N&&O.exception(r,"Failed to capture xhr breadcrumb")}}function gb(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=ss(r),i=n.getResponseHeader("content-length")?dl(n.getResponseHeader("content-length")):vb(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),i!==void 0&&(e.data.response_body_size=i)}function yb(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Wr(c,n.networkDetailAllowUrls)||Wr(c,n.networkDetailDenyUrls)){const y=On(l),k=On(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:y,response:k}}const p=a[Tt],h=p?fi(p.request_headers,n.networkRequestHeaders):{},m=fi(Sb(a),n.networkResponseHeaders),[_,g]=n.networkCaptureBodies?wu(o,O):[void 0],[v,A]=n.networkCaptureBodies?bb(a):[void 0],C=dt(h,l,_),x=dt(m,f,v);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:g?Hr(C,g):C,response:A?Hr(x,A):x}}function Sb(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return i&&(n[s.toLowerCase()]=i),n},{}):{}}function bb(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Eb(e.response,e.responseType)}catch(n){t.push(n)}return N&&O.warn("Failed to get xhr response body",...t),[void 0]}function Eb(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return N&&O.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return N&&O.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vb(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return ss(n)}catch{return}}function wb(e){const t=$();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(c,u)=>Tb(a,c,u))}catch{}}function Tb(e,t,n){if(t.data)try{kb(t)&&Cb(n)&&(gb(t,n),_b(t,n,e)),Ib(t)&&Rb(n)&&(ob(t,n),ib(t,n,e))}catch(r){N&&O.exception(r,"Error when enriching network breadcrumb")}}function kb(e){return e.category==="xhr"}function Ib(e){return e.category==="fetch"}function Cb(e){return e?.xhr}function Rb(e){return e?.response}function xb(e,{autoFlushOnFeedback:t}){const n=$();Su(sS(e)),Zr(eb(e)),qS(e),wb(e);const r=ZS(e);ff(r),n&&(n.on("beforeSendEvent",zS(e)),n.on("afterSendEvent",US(e)),n.on("createDsc",s=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("spanStart",s=>{e.lastActiveSpan=s}),n.on("spanEnd",s=>{e.lastActiveSpan=s}),n.on("beforeSendFeedback",async(s,i)=>{const o=e.getSessionId();i?.includeReplay&&e.isEnabled()&&o&&s.contexts?.feedback&&(s.contexts.feedback.source==="api"&&t&&await e.flush(),s.contexts.feedback.replay_id=o)}),t&&n.on("openFeedbackWidget",async()=>{await e.flush()}))}async function Mb(e){try{return Promise.all(rs(e,[Ab(se.performance.memory)]))}catch{return[]}}function Ab(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Nb(e,t,n){let r,s,i;const o=n?.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?a():r}function d(){return s&&clearTimeout(s),s=an(a,t),o&&i===void 0&&(i=an(a,o)),r}return d.cancel=c,d.flush=u,d}const dr=G.navigator;function Ob(){return/iPhone|iPad|iPod/i.test(dr?.userAgent??"")||/Macintosh/i.test(dr?.userAgent??"")&&dr?.maxTouchPoints&&dr?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Db(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){N&&O.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&Qy(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!Yi(e,n,s))return!0;if(!s)return!1;const i=e.session;if(Pb(e,s),e.recordingMode==="buffer"&&i&&e.eventBuffer){const o=e.eventBuffer.getEarliestTimestamp();o&&(N&&O.info(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&Vi(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Lb(e){const t=e.getOptions();return{type:B.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Pb(e,t){!t||!e.session||e.session.segmentId!==0||Yi(e,Lb(e),!1)}function Fb(e,t,n,r){return Ft(gc(e,wi(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function $b({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function Bb({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit("preprocessEvent",r,i);const o=await vc(e.getOptions(),r,i,t,e,Be());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u}=a?.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},o}async function Ub({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=$b({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=$(),f=ne(),p=l?.getTransport(),h=l?.getDsn();if(!l||!p||!h||!i.sampled)return nt({});const m={type:gg,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},_=await Bb({scope:f,client:l,replayId:t,event:m});if(!_)return l.recordDroppedEvent("event_processor","replay"),N&&O.info("An event processor returned `null`, will not send event."),nt({});delete _.sdkProcessingMetadata;const g=Fb(_,o,h,l.getOptions().tunnel);let v;try{v=await p.send(g)}catch(C){const x=new Error(Pi);try{x.cause=C}catch{}throw x}if(typeof v.statusCode=="number"&&(v.statusCode<200||v.statusCode>=300))throw new hl(v.statusCode);const A=Dc({},v);if(Oc(A,"replay"))throw new Ki(A);return v}class hl extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Ki extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function ml(e,t={count:0,interval:wg}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Ub(e),!0}catch(s){if(s instanceof hl||s instanceof Ki)throw s;if(lf("Replays",{_retryCount:t.count}),r&&r(s),t.count>=Tg){const i=new Error(`${Pi} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{an(async()=>{try{await ml(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const _l="__THROTTLED",Hb="__SKIPPED";function Wb(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const d=o;return o=!0,d?Hb:_l}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class zb{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:yg,sessionIdleExpire:Sg},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Nb(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Wb((o,a)=>FS(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(kg,r),timeout:r,scrollTimeout:Ig,ignoreSelector:s?s.join(","):""}:void 0;if(i&&(this.clickDetector=new Xy(this,i)),N){const o=t._experiments;O.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{se.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=je({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=je({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{cS(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){N&&O.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){N&&O.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",N&&O.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){N&&O.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){N&&O.info("Buffering is in progress, call `flush()` to save the replay");return}N&&O.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=xs({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled){N&&O.info("Buffering is in progress, call `flush()` to save the replay");return}N&&O.infoTick("Starting replay in buffer mode");const t=xs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Ke({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:vg}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Db(this),...Ob(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{N&&O.info(`Stopping Replay${n?` triggered by ${n}`:""}`),ul(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,NS(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),N&&O.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),N&&O.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();N&&O.info("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&li(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${se.location.pathname}${se.location.hash}${se.location.search}`,n=`${se.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===_l){const s=je({category:"replay.throttled"});this.addUpdate(()=>!Yi(this,{type:Wy,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||we(),n=t&&_e(t),s=(n&&Y(n).data||{})[ze];if(!(!n||!s||!["route","custom"].includes(s)))return Y(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=xS({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=xs({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return il(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{se.document.addEventListener("visibilitychange",this._handleVisibilityChange),se.addEventListener("blur",this._handleWindowBlur),se.addEventListener("focus",this._handleWindowFocus),se.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(xb(this,{autoFlushOnFeedback:this._options._experiments.autoFlushOnFeedback}),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=vS(this)}_removeListeners(){try{se.document.removeEventListener("visibilitychange",this._handleVisibilityChange),se.removeEventListener("blur",this._handleWindowBlur),se.removeEventListener("focus",this._handleWindowFocus),se.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||sl(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){N&&O.info("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:B.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=fS(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(rs(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){N&&O.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await Mb(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await ml({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:o=>this.handleException(o)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=$();if(r){const s=n instanceof Ki?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){N&&O.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){N&&O.info(`Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&N&&O.info("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Vi(this.session)}_onMutationHandler(t){const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const o=je({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function yn(e,t){return[...e,...t].join(",")}function jb({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const i=["base","iframe[srcdoc]:not([src])"],o=yn(e,[".sentry-mask","[data-sentry-mask]"]),a=yn(t,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:yn(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:yn(r,[]),ignoreSelector:yn(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function qb({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Aa='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Gb=["content-length","content-type","accept"];let Na=!1;const Vb=e=>new Yb(e);class Yb{constructor({flushMinDelay:t=bg,flushMaxDelay:n=Eg,minReplayDuration:r=Cg,maxReplayDuration:s=la,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:g=[],networkCaptureBodies:v=!0,networkRequestHeaders:A=[],networkResponseHeaders:C=[],mask:x=[],maskAttributes:y=["title","placeholder"],unmask:k=[],block:w=[],unblock:S=[],ignore:T=[],maskFn:I,beforeAddRecordingEvent:b,beforeErrorSampling:R,onError:P}={}){this.name="Replay";const W=jb({mask:x,unmask:k,block:w,unblock:S,ignore:T});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(M,Z,D)=>qb({maskAttributes:y,maskAllText:u,privacyOptions:W,key:M,value:Z,el:D}),...W,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:M=>{try{M.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Rg),maxReplayDuration:Math.min(s,la),stickySession:i,useCompression:o,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:g,networkCaptureBodies:v,networkRequestHeaders:Oa(A),networkResponseHeaders:Oa(C),beforeAddRecordingEvent:b,beforeErrorSampling:R,onError:P,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Aa}`:Aa),this._isInitialized&&qs())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Na}set _isInitialized(t){Na=t}afterAllSetup(t){!qs()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=Xb(this._initialOptions,t);this._replay=new zb({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Xb(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=At(n.replaysSessionSampleRate),i=At(n.replaysOnErrorSampleRate);return s==null&&i==null&&gt(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),i!=null&&(r.errorSampleRate=i),r}function Oa(e){return[...Gb,...e.map(t=>t.toLowerCase())]}const Da=new WeakMap,Ms=new Map,gl={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Kb(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c}={...gl,...t},u=typeof i=="function"?i:f=>!0,d=f=>Qb(f,a),l={};n&&(e.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(p=>{if(p.op==="http.client"){const h=Ms.get(p.span_id);h&&(p.timestamp=h/1e3,Ms.delete(p.span_id))}}),f)),s&&Cp(f=>{if(f.response){const p=Da.get(f.response);p&&f.endTimestamp&&Ms.set(p,f.endTimestamp)}}),zc(f=>{const p=yp(f,u,d,l);if(f.response&&f.fetchData.__span&&Da.set(f.response,f.fetchData.__span),p){const h=yl(f.fetchData.url),m=h?xt(h).host:void 0;p.setAttributes({"http.url":h,"server.address":m}),o&&La(p),c?.(p,{headers:f.headers})}})),r&&Eu(f=>{const p=eE(f,u,d,l);if(p){o&&La(p);let h;try{h=new Headers(f.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(p,{headers:h})}})}function Jb(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function La(e){const{url:t}=Y(e).data;if(!t||typeof t!="string")return;const n=on("resource",({entries:r})=>{r.forEach(s=>{Jb(s)&&s.name.endsWith(t)&&(Zb(s).forEach(o=>e.setAttribute(...o)),setTimeout(n))})})}function We(e=0){return((Ae()||performance.timeOrigin)+e)/1e3}function Zb(e){const{name:t,version:n}=yu(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),Ae()?[...r,["http.request.redirect_start",We(e.redirectStart)],["http.request.fetch_start",We(e.fetchStart)],["http.request.domain_lookup_start",We(e.domainLookupStart)],["http.request.domain_lookup_end",We(e.domainLookupEnd)],["http.request.connect_start",We(e.connectStart)],["http.request.secure_connection_start",We(e.secureConnectionStart)],["http.request.connection_end",We(e.connectEnd)],["http.request.request_start",We(e.requestStart)],["http.request.response_start",We(e.responseStart)],["http.request.response_end",We(e.responseEnd)]]:r}function Qb(e,t){const n=Lt();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return t?lt(r.toString(),t)||i&&lt(r.pathname,t):i}else{const r=!!e.match(/^\/(?!\/)/);return t?lt(e,t):r}}function eE(e,t,n,r){const s=e.xhr,i=s?.[Tt];if(!s||s.__sentry_own_request__||!i)return;const{url:o,method:a}=i,c=pt()&&t(o);if(e.endTimestamp&&c){const m=s.__sentry_xhr_span_id__;if(!m)return;const _=r[m];_&&i.status_code!==void 0&&(Za(_,i.status_code),_.end(),delete r[m]);return}const u=yl(o),d=xt(u||o),l=gp(o),f=!!we(),p=c&&f?Bn({name:`${a} ${l}`,attributes:{url:o,type:"xhr","http.method":a,"http.url":u,"server.address":d?.host,[pe]:"auto.http.browser",[Mt]:"http.client",...d?.search&&{"http.query":d?.search},...d?.hash&&{"http.fragment":d?.hash}}}):new Ot;s.__sentry_xhr_span_id__=p.spanContext().spanId,r[s.__sentry_xhr_span_id__]=p,n(o)&&tE(s,pt()&&f?p:void 0);const h=$();return h&&h.emit("beforeOutgoingRequestSpan",p,e),p}function tE(e,t){const{"sentry-trace":n,baggage:r}=Pc({span:t});n&&nE(e,n,r)}function nE(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch{}}function yl(e){try{return new URL(e,q.location.origin).href}catch{return}}function rE(){q.document?q.document.addEventListener("visibilitychange",()=>{const e=we();if(!e)return;const t=_e(e);if(q.document.hidden&&t){const n="cancelled",{op:r,status:s}=Y(t);Oe&&E.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:de,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Oe&&E.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const sE=3600,Sl="sentry_previous_trace",iE="sentry.previous_trace";function Pa(e,t){const n=Y(t);if(!e)return{spanContext:t.spanContext(),startTimestamp:n.start_timestamp};const r=e.spanContext;return r.traceId===n.trace_id?e:(Date.now()/1e3-e.startTimestamp<=sE&&(Oe&&E.info(`Adding previous_trace ${r} link to span ${{op:n.op,...t.spanContext()}}`),t.addLink({context:r,attributes:{[Gl]:"previous_trace"}}),t.setAttribute(iE,`${r.traceId}-${r.spanId}-${r.traceFlags===1?1:0}`)),{spanContext:t.spanContext(),startTimestamp:Y(t).start_timestamp})}function oE(e){try{q.sessionStorage.setItem(Sl,JSON.stringify(e))}catch(t){Oe&&E.warn("Could not store previous trace in sessionStorage",t)}}function aE(){try{const e=q.sessionStorage?.getItem(Sl);return JSON.parse(e)}catch{return}}const cE="BrowserTracing",uE={...mr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,linkPreviousTrace:"in-memory",_experiments:{},...gl};let Fa=!1;const lE=(e={})=>{Fa&&gt(()=>{console.warn("Multiple browserTracingIntegration instances are not supported.")}),Fa=!0;const t=q.document;hd();const{enableInp:n,enableLongTask:r,enableLongAnimationFrame:s,_experiments:{enableInteractions:i,enableStandaloneClsSpans:o},beforeStartSpan:a,idleTimeout:c,finalTimeout:u,childSpanTimeout:d,markBackgroundSpan:l,traceFetch:f,traceXHR:p,trackFetchStreamPerformance:h,shouldCreateSpanForRequest:m,enableHTTPTimings:_,instrumentPageLoad:g,instrumentNavigation:v,linkPreviousTrace:A,onRequestSpanStart:C}={...uE,...e},x=Vm({recordClsStandaloneSpans:o||!1});n&&y_(),s&&G.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Xm():r&&Ym(),i&&Km();const y={name:void 0,source:void 0};function k(w,S){const T=S.op==="pageload",I=a?a(S):S,b=I.attributes||{};S.name!==I.name&&(b[ze]="custom",I.attributes=b),y.name=I.name,y.source=b[ze];const R=Ec(I,{idleTimeout:c,finalTimeout:u,childSpanTimeout:d,disableAutoFinish:T,beforeSpanEnd:W=>{x(),t_(W,{recordClsOnPageloadSpan:!o}),Ba(w,void 0);const M=ne(),Z=M.getPropagationContext();M.setPropagationContext({...Z,traceId:R.spanContext().traceId,sampled:Pt(R),dsc:tt(W)})}});Ba(w,R);function P(){t&&["interactive","complete"].includes(t.readyState)&&w.emit("idleSpanEnableAutoFinish",R)}T&&t&&(t.addEventListener("readystatechange",()=>{P()}),P())}return{name:cE,afterAllSetup(w){let S=Lt();function T(){const I=is(w);I&&!Y(I).timestamp&&(Oe&&E.log(`[Tracing] Finishing current active span with op: ${Y(I).op}`),I.end())}if(w.on("startNavigationSpan",I=>{$()===w&&(T(),Be().setPropagationContext({traceId:ft(),sampleRand:Math.random()}),ne().setPropagationContext({traceId:ft(),sampleRand:Math.random()}),k(w,{op:"navigation",...I}))}),w.on("startPageLoadSpan",(I,b={})=>{if($()!==w)return;T();const R=b.sentryTrace||$a("sentry-trace"),P=b.baggage||$a("baggage"),W=nd(R,P);ne().setPropagationContext(W),k(w,{op:"pageload",...I})}),A!=="off"){let I;w.on("spanStart",b=>{if(_e(b)===b)if(A==="session-storage"){const R=Pa(aE(),b);oE(R)}else I=Pa(I,b)})}if(q.location){if(g){const I=Ae();dE(w,{name:q.location.pathname,startTime:I?I/1e3:void 0,attributes:{[ze]:"url",[pe]:"auto.pageload.browser"}})}v&&Zr(({to:I,from:b})=>{if(b===void 0&&S?.indexOf(I)!==-1){S=void 0;return}b!==I&&(S=void 0,fE(w,{name:q.location.pathname,attributes:{[ze]:"url",[pe]:"auto.navigation.browser"}}))})}l&&rE(),i&&pE(w,c,u,d,y),n&&b_(),Kb(w,{traceFetch:f,traceXHR:p,trackFetchStreamPerformance:h,tracePropagationTargets:w.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:_,onRequestSpanStart:C})}}};function dE(e,t,n){return e.emit("startPageLoadSpan",t,n),ne().setTransactionName(t.name),is(e)}function fE(e,t){return e.emit("startNavigationSpan",t),ne().setTransactionName(t.name),is(e)}function $a(e){return q.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function pE(e,t,n,r,s){const i=q.document;let o;const a=()=>{const c="ui.action.click",u=is(e);if(u){const d=Y(u).op;if(["navigation","pageload"].includes(d)){Oe&&E.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Ds,"interactionInterrupted"),o.end(),o=void 0),!s.name){Oe&&E.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=Ec({name:s.name,op:c,attributes:{[ze]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{once:!1,capture:!0})}const bl="_sentry_idleSpan";function is(e){return e[bl]}function Ba(e,t){Me(e,bl,t)}function hE(e){const t={defaultIntegrations:mE(),...e};return Lc(t,"astro",["astro","browser"]),_g(t)}function mE(e){return typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__?[...ri(),lE()]:ri()}const _E="https://5237cfa6eb046b1d4578875afd892f26@o4508385501839360.ingest.us.sentry.io/4510258137333760";var gE=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};gE.SENTRY_RELEASE={id:"208d24bcdbc1d91205717f7ac33e77e2514a5aa3"};hE({dsn:_E,sendDefaultPii:!0,integrations:[Iu(),Vb(),Xh({colorScheme:"system"})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:.1});
